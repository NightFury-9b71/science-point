import{j as e}from"./query-vendor.8wxMU1ov.js";import{r as f}from"./router-vendor.hUHkLMlj.js";import{u as T}from"./teacher-pages.Do1_KYSo.js";import{w as D}from"./withAuthGuard.DUcKPOLq.js";import{p as M,q as R,r as $,V as C,C as a,B as y}from"./admin-pages.BUna6bVg.js";import{C as j,F as w,m as g,k as S,s as L,n as W,L as B,j as _,B as H,r as A}from"./ui-vendor.D9emdPb2.js";import{S as z,a as O,b as E}from"./student-pages.1qTz8pHo.js";import"./react-vendor.CdglivQu.js";import"./http-vendor.BNtd7jmy.js";const b=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()],k=({studentId:c})=>{const{data:o=[]}=M(c),{data:h=[]}=R(c),{data:d=[]}=$(c),{data:r=[]}=C(c);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(j,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Today's Classes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(t=>t.day_of_week===b()).length})]})]})}),e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(w,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Study Materials"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.length})]})]})}),e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"New Notices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})}),e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(S,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Exam Results"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(a.Title,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Today's Schedule"]})}),e.jsx(a.Content,{children:r.filter(t=>t.day_of_week===b()).length>0?e.jsx("div",{className:"space-y-3",children:r.filter(t=>t.day_of_week===b()).sort((t,l)=>t.start_time.localeCompare(l.start_time)).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.subject?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.start_time," - ",t.end_time]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-600",children:[e.jsx("p",{children:t.teacher?.user?.full_name}),t.room_number&&e.jsxs("p",{children:["Room ",t.room_number]})]})]},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No classes scheduled for today"})]})})]}),e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(a.Title,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Recent Notices"]})}),e.jsx(a.Content,{children:d.slice(0,3).length>0?e.jsx("div",{className:"space-y-3",children:d.slice(0,3).map(t=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(t.created_at).toLocaleDateString()})]}),t.is_urgent&&e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium",children:"Urgent"})]})},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No notices available"})]})})]})]}),e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsx(a.Title,{children:"Quick Actions"})}),e.jsx(a.Content,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(y,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",children:[e.jsx(L,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"View Profile"})]}),e.jsxs(y,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",children:[e.jsx(j,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Schedule"})]}),e.jsxs(y,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",children:[e.jsx(w,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Materials"})]}),e.jsxs(y,{variant:"outline",className:"flex flex-col items-center p-4 h-auto",children:[e.jsx(S,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Results"})]})]})})]})]})},V=({studentId:c})=>{const o=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()],[h,d]=f.useState(o()),[r,t]=f.useState("weekly"),{data:l=[],isLoading:n}=C(c,r==="daily"?h:null),N=[{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"}],p=s=>s===o(),v=N.reduce((s,i)=>(s[i.value]=l.filter(x=>x.day_of_week===i.value).sort((x,u)=>x.start_time.localeCompare(u.start_time)),s),{});return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"My Class Schedule"})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex rounded-lg border border-gray-300",children:[e.jsxs(y,{variant:r==="weekly"?"default":"ghost",size:"sm",onClick:()=>t("weekly"),className:"rounded-r-none border-0",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),"Weekly"]}),e.jsxs(y,{variant:r==="daily"?"default":"ghost",size:"sm",onClick:()=>t("daily"),className:"rounded-l-none border-0",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Daily"]})]})})]}),r==="daily"&&e.jsx(a,{children:e.jsx(a.Content,{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(s=>e.jsxs(y,{variant:h===s.value?"default":"outline",size:"sm",onClick:()=>d(s.value),className:p(s.value)?"ring-2 ring-blue-300":"",children:[s.label,p(s.value)&&e.jsx("span",{className:"ml-1 text-xs",children:"(Today)"})]},s.value))})})}),r==="weekly"?e.jsxs(a,{children:[e.jsx(a.Header,{className:"p-4 sm:p-6",children:e.jsxs(a.Title,{className:"text-lg sm:text-xl flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"My Weekly Class Schedule"]})}),e.jsx(a.Content,{className:"p-0",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-7 divide-y lg:divide-y-0 lg:divide-x",children:N.map(s=>{const i=v[s.value]||[],x=o(),u=s.value===x;return e.jsxs("div",{className:`p-4 ${u?"bg-blue-50":""}`,children:[e.jsx("div",{className:"mb-3",children:e.jsxs("h3",{className:`font-semibold ${u?"text-blue-900":"text-gray-900"}`,children:[s.label,u&&e.jsx("span",{className:"ml-1 text-xs text-blue-600",children:"(Today)"})]})}),e.jsx("div",{className:"space-y-2",children:i.length>0?i.map(m=>e.jsxs("div",{className:"p-3 rounded-lg border-l-4 border-blue-500 bg-blue-50",children:[e.jsxs("div",{className:"text-xs font-medium text-blue-600 mb-1",children:[m.start_time," - ",m.end_time]}),e.jsx("div",{className:"font-medium text-sm text-blue-900 mb-1",children:m.subject?.name}),e.jsxs("div",{className:"text-xs text-blue-700 mb-1",children:["Teacher: ",m.teacher?.user?.full_name]}),m.room_number&&e.jsxs("div",{className:"text-xs text-blue-600",children:["Room: ",m.room_number]})]},m.id)):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(_,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No classes"})]})})]},s.value)})})})]}):e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(a.Title,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),N.find(s=>s.value===h)?.label," Schedule"]})}),e.jsx(a.Content,{children:l.length>0?e.jsx("div",{className:"space-y-4",children:l.map(s=>e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{className:"h-4 w-4 text-gray-600"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[s.start_time," - ",s.end_time]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:s.subject?.name||"Subject"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Teacher:"})," ",s.teacher?.user?.full_name||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Subject Code:"})," ",s.subject?.code||"N/A"]}),s.room_number&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Room:"})," ",s.room_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duration:"})," ",(()=>{const i=new Date(`1970-01-01T${s.start_time}:00`);return`${(new Date(`1970-01-01T${s.end_time}:00`)-i)/(1e3*60)} minutes`})()]})]})]})})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Classes Scheduled"}),e.jsxs("p",{className:"text-gray-500",children:["No classes are scheduled for ",N.find(s=>s.value===h)?.label.toLowerCase(),"."]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.length}),e.jsx("div",{className:"text-sm text-gray-600",children:r==="daily"?"Classes Today":"Total Classes"})]})}),e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.length>0?(()=>{const s=l.reduce((i,x)=>{const u=new Date(`1970-01-01T${x.start_time}:00`),m=new Date(`1970-01-01T${x.end_time}:00`);return i+(m-u)/6e4},0);return`${Math.round(s/60*10)/10}h`})():"0h"}),e.jsx("div",{className:"text-sm text-gray-600",children:r==="daily"?"Hours Today":"Total Hours/Week"})]})}),e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.length>0?new Set(l.map(s=>s.subject_id)).size:0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Subjects"})]})}),e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l.length>0?new Set(l.map(s=>s.teacher_id)).size:0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Teachers"})]})})]})]})},F=()=>{const{user:c}=T(),[o,h]=f.useState("overview");if(!c?.student_id&&!c?.studentId)return e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("div",{className:"text-yellow-600 mb-2",children:e.jsx("svg",{className:"h-8 w-8 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-yellow-900 mb-2",children:"Student Profile Incomplete"}),e.jsx("p",{className:"text-yellow-700",children:"Your student profile is not properly set up. Please contact the administrator."})]})});const d=c?.student_id||c?.studentId,r=[{id:"overview",label:"Overview",icon:A},{id:"results",label:"Results",icon:S},{id:"schedule",label:"Schedule",icon:j},{id:"notices",label:"Notices",icon:g},{id:"materials",label:"Study Materials",icon:w}],t=({tab:n,activeTab:N,onClick:p})=>{const v=n.icon;return e.jsxs("button",{onClick:()=>p(n.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm ${N===n.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v,{className:"h-5 w-5"}),n.label]})},l=()=>{switch(o){case"overview":return e.jsx(k,{studentId:d});case"results":return e.jsx(E,{studentId:d});case"schedule":return e.jsx(V,{studentId:d});case"notices":return e.jsx(O,{studentId:d});case"materials":return e.jsx(z,{});default:return e.jsx(k,{studentId:d})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",c?.full_name||"Student","!"]}),e.jsx("p",{className:"text-blue-100",children:"Here's your learning dashboard"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:r.map(n=>e.jsx(t,{tab:n,activeTab:o,onClick:h},n.id))})}),e.jsx("div",{className:"mt-6",children:l()})]})},X=D(F,["student","admin"]);export{X as default};
