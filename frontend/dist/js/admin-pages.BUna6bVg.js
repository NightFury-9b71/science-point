import{j as e,u as te,a as B,b as Y}from"./query-vendor.8wxMU1ov.js";import{u as Ne,r as j}from"./router-vendor.hUHkLMlj.js";import{U as Se,G as Le,B as Be,C as $e,a as Oe,E as ye,b as Re,X as Ee,A as we,P as ve,S as Ce,t as g,c as Xe,d as Pe,e as He,K as Ie,D as Ze,F as Ve,f as es,g as Ye,h as ss,T as ze,i as Fe,j as as}from"./ui-vendor.D9emdPb2.js";import{a as ts}from"./http-vendor.BNtd7jmy.js";const ls={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ANALYTICS_ID:"GA_MEASUREMENT_ID",VITE_API_BASE_URL:"https://api.sciencepoint.com",VITE_API_TIMEOUT:"15000",VITE_APP_NAME:"Science Point",VITE_APP_VERSION:"1.0.0",VITE_AUTH_TOKEN_EXPIRY:"43200",VITE_CACHE_TTL:"900",VITE_CDN_BASE_URL:"https://cdn.sciencepoint.com",VITE_ENABLE_CONSOLE_LOGS:"false",VITE_ENABLE_CSP:"true",VITE_ENABLE_DEBUG:"false",VITE_ENABLE_DEV_TOOLS:"false",VITE_ENABLE_HTTPS_ONLY:"true",VITE_ENABLE_MOCK_DATA:"false",VITE_ERROR_REPORTING_ENABLED:"true",VITE_FILE_UPLOAD_MAX_SIZE:"2097152",VITE_NODE_ENV:"production",VITE_PAGINATION_LIMIT:"25",VITE_SENTRY_DSN:"https://your-sentry-dsn@sentry.io"};class rs{constructor(){this.env="production",this.isDevelopment=this.env==="development",this.isProduction=!0,this.isStaging=this.env==="staging"}get app(){return{name:"Science Point",version:"1.0.0",environment:this.env}}get api(){return{baseURL:"https://api.sciencepoint.com",timeout:parseInt("15000"),retryAttempts:3,retryDelay:1e3}}get frontend(){return{baseURL:"http://localhost:5173"}}get auth(){return{tokenKey:"token",userKey:"user",tokenExpiry:parseInt("43200"),refreshThreshold:300}}get features(){return{enableDebug:!1,enableMockData:!1,enableDevTools:!1,enableConsoleLogs:!1,enableErrorReporting:!0}}get ui(){return{paginationLimit:parseInt("25"),fileUploadMaxSize:parseInt("2097152"),cacheTimeout:parseInt("900"),debounceDelay:300,toastTimeout:5e3}}get services(){return{sentry:{dsn:"https://your-sentry-dsn@sentry.io",environment:this.env,enabled:this.features.enableErrorReporting&&!0},analytics:{id:"GA_MEASUREMENT_ID",enabled:!0},cdn:{baseURL:"https://cdn.sciencepoint.com"}}}get security(){return{httpsOnly:!0,enableCSP:!0,trustedDomains:["localhost","sciencepoint.com","*.sciencepoint.com"]}}get logging(){return{level:this.isDevelopment?"debug":"error",enableConsole:this.features.enableConsoleLogs,enableRemote:this.features.enableErrorReporting&&this.isProduction}}get(a,l=null){const m=a.split(".");let _=this;for(const f of m)if(_=_[f],_===void 0)return l;return _}validateRequiredEnv(){const l=["VITE_API_BASE_URL"].filter(m=>!ls[m]);if(l.length>0){const m=`Missing required environment variables: ${l.join(", ")}`;if(this.isProduction)throw new Error(m)}}getDatabaseConfig(){return this.isDevelopment?{queryRetries:3,cacheTimeout:300*1e3,enableQueryDevTools:!0}:{queryRetries:5,cacheTimeout:900*1e3,enableQueryDevTools:!1}}getPerformanceConfig(){return{enableLazyLoading:!0,chunkSizeLimit:this.isProduction?500:1e3,enableGzip:this.isProduction,enableBrotli:this.isProduction,enableServiceWorker:this.isProduction}}}const he=new rs;he.validateRequiredEnv();he.isDevelopment;he.isProduction;class oe{static log(...a){he.logging.enableConsole}static info(...a){he.logging.enableConsole}static warn(...a){}static error(...a){}static debug(...a){he.logging.enableConsole&&he.features.enableDebug}}class ns{constructor(){this.isInitialized=!1,this.metrics={performance:[],userActions:[],apiCalls:[],errors:[]},this.startTime=performance.now(),this.sessionId=this.generateSessionId()}init(){this.isInitialized||(this.initPerformanceMonitoring(),this.initUserTracking(),this.initAPIMonitoring(),this.isInitialized=!0,oe.info("Monitoring service initialized",{sessionId:this.sessionId}))}initPerformanceMonitoring(){window.addEventListener("load",()=>{setTimeout(()=>{this.trackPageLoad()},0)}),"navigation"in performance&&this.trackNavigationTiming(),"PerformanceObserver"in window&&(this.trackLCP(),this.trackFID(),this.trackCLS())}initUserTracking(){document.addEventListener("visibilitychange",()=>{this.trackVisibilityChange()}),this.trackUserEngagement(),this.trackRouteChanges()}initAPIMonitoring(){}trackPageLoad(){const a=performance.getEntriesByType("navigation")[0];if(!a)return;const l={type:"page_load",url:window.location.href,timing:{dns:a.domainLookupEnd-a.domainLookupStart,tcp:a.connectEnd-a.connectStart,request:a.responseStart-a.requestStart,response:a.responseEnd-a.responseStart,dom:a.domContentLoadedEventEnd-a.domContentLoadedEventStart,load:a.loadEventEnd-a.loadEventStart,total:a.loadEventEnd-a.navigationStart},timestamp:new Date().toISOString(),sessionId:this.sessionId};this.addMetric("performance",l),oe.info("Page load metrics:",l)}trackNavigationTiming(){const a=performance.getEntriesByType("navigation")[0];if(!a)return;const l={type:"navigation_timing",url:window.location.href,redirects:a.redirectEnd-a.redirectStart,appCache:a.domainLookupStart-a.fetchStart,dns:a.domainLookupEnd-a.domainLookupStart,tcp:a.connectEnd-a.connectStart,request:a.responseStart-a.requestStart,response:a.responseEnd-a.responseStart,processing:a.loadEventStart-a.domLoading,onLoad:a.loadEventEnd-a.loadEventStart,timestamp:new Date().toISOString(),sessionId:this.sessionId};this.addMetric("performance",l)}trackLCP(){new PerformanceObserver(l=>{const m=l.getEntries(),_=m[m.length-1];this.addMetric("performance",{type:"lcp",value:_.startTime,url:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId})}).observe({entryTypes:["largest-contentful-paint"]})}trackFID(){new PerformanceObserver(l=>{for(const m of l.getEntries())this.addMetric("performance",{type:"fid",value:m.processingStart-m.startTime,url:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId})}).observe({entryTypes:["first-input"]})}trackCLS(){let a=0;new PerformanceObserver(m=>{for(const _ of m.getEntries())_.hadRecentInput||(a+=_.value);this.addMetric("performance",{type:"cls",value:a,url:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId})}).observe({entryTypes:["layout-shift"]})}trackVisibilityChange(){this.addMetric("userActions",{type:"visibility_change",visible:!document.hidden,url:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId})}trackUserEngagement(){let a=Date.now(),l=!0;const m=()=>{if(l){const f=Date.now()-a;this.addMetric("userActions",{type:"engagement",duration:f,url:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId})}a=Date.now(),l=!0};["click","scroll","keydown","mousemove"].forEach(f=>{document.addEventListener(f,()=>{l||(a=Date.now(),l=!0)},{passive:!0})}),document.addEventListener("blur",()=>{l=!1,m()}),setInterval(m,3e4)}trackRouteChanges(){let a=window.location.href;const l=()=>{window.location.href!==a&&(this.addMetric("userActions",{type:"route_change",from:a,to:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId}),a=window.location.href)};window.addEventListener("popstate",l);const m=history.pushState,_=history.replaceState;history.pushState=function(...f){m.apply(this,f),setTimeout(l,0)},history.replaceState=function(...f){_.apply(this,f),setTimeout(l,0)}}trackAPICall(a,l,m,_,f=null){const k={type:"api_call",method:a,url:l,duration:m,status:_,error:f?f.toString():null,timestamp:new Date().toISOString(),sessionId:this.sessionId};this.addMetric("apiCalls",k),m>5e3&&oe.warn("Slow API call detected:",k)}trackUserAction(a,l={}){this.addMetric("userActions",{type:"user_action",action:a,details:l,url:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId})}trackError(a,l={}){this.addMetric("errors",{type:"application_error",error:a.toString(),stack:a.stack,context:l,url:window.location.href,timestamp:new Date().toISOString(),sessionId:this.sessionId})}addMetric(a,l){this.metrics[a]||(this.metrics[a]=[]),this.metrics[a].push(l),this.metrics[a].length>1e3&&(this.metrics[a]=this.metrics[a].slice(-500)),he.services.analytics.enabled&&this.sendToExternalService(a,l)}sendToExternalService(a,l){he.isDevelopment&&oe.debug("Analytics event:",{category:a,data:l})}getMetrics(a=null){return a?this.metrics[a]||[]:this.metrics}getPerformanceReport(){const a=this.metrics.performance,l=this.metrics.apiCalls;return{sessionId:this.sessionId,sessionDuration:Date.now()-this.startTime,pageLoads:a.filter(m=>m.type==="page_load").length,averageLoadTime:this.calculateAverageLoadTime(a),apiCallsCount:l.length,slowApiCalls:l.filter(m=>m.duration>3e3).length,errorCount:this.metrics.errors.length,userEngagement:this.calculateEngagement(),timestamp:new Date().toISOString()}}calculateAverageLoadTime(a){const l=a.filter(_=>_.type==="page_load");if(l.length===0)return 0;const m=l.reduce((_,f)=>_+f.timing.total,0);return Math.round(m/l.length)}calculateEngagement(){const a=this.metrics.userActions.filter(m=>m.type==="engagement");if(a.length===0)return 0;const l=a.reduce((m,_)=>m+_.duration,0);return Math.round(l/1e3)}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}cleanup(){const a=Date.now()-864e5;Object.keys(this.metrics).forEach(l=>{this.metrics[l]=this.metrics[l].filter(m=>new Date(m.timestamp).getTime()>a)})}}const Ge=new ns,i=({children:s,variant:a="primary",size:l="md",className:m="",disabled:_=!1,loading:f=!1,...k})=>{const D="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",G={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-blue-500"},U={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},W=_||f?"opacity-50 cursor-not-allowed":"";return e.jsxs("button",{className:`${D} ${G[a]} ${U[l]} ${W} ${m}`,disabled:_||f,...k,children:[f&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})},b=({children:s,className:a="",...l})=>e.jsx("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 ${a}`,...l,children:s}),is=({children:s,className:a="",...l})=>e.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${a}`,...l,children:s}),cs=({children:s,className:a="",...l})=>e.jsx("div",{className:`px-6 py-4 ${a}`,...l,children:s}),ds=({children:s,className:a="",...l})=>e.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${a}`,...l,children:s});b.Header=is;b.Content=cs;b.Title=ds;const y=ts.create({baseURL:he.api.baseURL,timeout:he.api.timeout,headers:{"Content-Type":"application/json"}});y.interceptors.request.use(s=>{const a=localStorage.getItem(he.auth.tokenKey);return a&&(s.headers.Authorization=`Bearer ${a}`),s.metadata={startTime:Date.now()},s},s=>Promise.reject(s));y.interceptors.response.use(s=>{if(s.config.metadata){const a=Date.now()-s.config.metadata.startTime;Ge.trackAPICall(s.config.method.toUpperCase(),s.config.url,a,s.status)}return s},s=>{if(s.config?.metadata){const a=Date.now()-s.config.metadata.startTime;Ge.trackAPICall(s.config.method?.toUpperCase()||"UNKNOWN",s.config.url||"unknown",a,s.response?.status||0,s)}return oe.error("API Error:",s),s.response?.status===401&&(localStorage.removeItem(he.auth.tokenKey),localStorage.removeItem(he.auth.userKey),oe.warn("Authentication failed - token removed")),Promise.reject(s)});const L={getDashboardStats:()=>y.get("/admin/dashboard"),getUsers:(s=0,a=100)=>y.get(`/admin/users?skip=${s}&limit=${a}`),getUser:s=>y.get(`/admin/users/${s}`),createUser:s=>y.post("/admin/users",s),getStudents:(s=0,a=100)=>y.get(`/admin/students?skip=${s}&limit=${a}`),getStudent:s=>y.get(`/admin/students/${s}`),createStudent:s=>y.post("/admin/students",s),updateStudent:(s,a)=>y.put(`/admin/students/${s}`,a),deleteStudent:s=>y.delete(`/admin/students/${s}`),updateStudentPassword:(s,a)=>y.patch(`/admin/students/${s}/password`,{password:a}),getTeachers:(s=0,a=100)=>y.get(`/admin/teachers?skip=${s}&limit=${a}`),createTeacher:s=>y.post("/admin/teachers",s),updateTeacher:(s,a)=>y.put(`/admin/teachers/${s}`,a),deleteTeacher:s=>y.delete(`/admin/teachers/${s}`),updateTeacherPassword:(s,a)=>y.patch(`/admin/teachers/${s}/password`,{password:a}),getClasses:()=>y.get("/admin/classes"),createClass:s=>y.post("/admin/classes",s),updateClass:(s,a)=>y.put(`/admin/classes/${s}`,a),deleteClass:s=>y.delete(`/admin/classes/${s}`),getSubjects:()=>y.get("/admin/subjects"),createSubject:s=>y.post("/admin/subjects",s),updateSubject:(s,a)=>y.put(`/admin/subjects/${s}`,a),deleteSubject:s=>y.delete(`/admin/subjects/${s}`),getAttendance:(s={})=>{const a=new URLSearchParams;return s.class_id&&a.append("class_id",s.class_id),s.student_id&&a.append("student_id",s.student_id),s.date&&a.append("date",s.date),s.skip&&a.append("skip",s.skip),s.limit&&a.append("limit",s.limit),y.get(`/admin/attendance?${a}`)},markAttendance:s=>y.post("/admin/attendance",s),updateAttendance:(s,a)=>y.put(`/admin/attendance/${s}`,a),getExams:()=>y.get("/admin/exams"),createExam:s=>y.post("/admin/exams",s),updateExam:(s,a)=>y.put(`/admin/exams/${s}`,a),deleteExam:s=>y.delete(`/admin/exams/${s}`),getExamResults:(s={})=>{const a=new URLSearchParams;return s.exam_id&&a.append("exam_id",s.exam_id),s.student_id&&a.append("student_id",s.student_id),y.get(`/admin/exam-results?${a}`)},createExamResult:s=>y.post("/admin/exam-results",s),updateExamResult:(s,a)=>y.put(`/admin/exam-results/${s}`,a),getStudyMaterials:s=>{const a=s?`/admin/study-materials?subject_id=${s}`:"/admin/study-materials";return y.get(a)},createStudyMaterial:s=>y.post("/admin/study-materials",s),getNotices:(s={})=>{const a=new URLSearchParams;return s.target_role&&a.append("target_role",s.target_role),s.active_only!==void 0&&a.append("active_only",s.active_only),y.get(`/admin/notices?${a}`)},createNotice:s=>y.post("/admin/notices",s),updateNotice:(s,a)=>y.put(`/admin/notices/${s}`,a),deleteNotice:s=>y.delete(`/admin/notices/${s}`),getTeacherReviews:s=>{const a=s?`/admin/teacher-reviews?teacher_id=${s}`:"/admin/teacher-reviews";return y.get(a)},createTeacherReview:s=>y.post("/admin/teacher-reviews",s),getClassSchedules:(s={})=>{const a=new URLSearchParams;return s.day_of_week&&a.append("day_of_week",s.day_of_week),s.class_id&&a.append("class_id",s.class_id),s.teacher_id&&a.append("teacher_id",s.teacher_id),y.get(`/admin/class-schedules?${a}`)},createClassSchedule:s=>y.post("/admin/class-schedules",s),deleteClassSchedule:s=>y.delete(`/admin/class-schedules/${s}`),seedData:()=>y.post("/admin/seed-data"),resetData:(s=!1)=>y.post(`/admin/reset-data?confirm=${s}`),recreateTables:()=>y.post("/admin/recreate-tables"),getDataStats:()=>y.get("/admin/data-stats"),getAdmissionRequests:()=>y.get("/admin/admission-requests?status=pending"),approveAdmissionRequest:s=>y.post(`/admin/admission-requests/${s}/approve`).then(a=>a.data),rejectAdmissionRequest:s=>y.post(`/admin/admission-requests/${s}/reject`).then(a=>a.data),uploadUserPhoto:(s,a)=>y.post(`/users/${s}/photo`,a,{headers:{"Content-Type":"multipart/form-data"}}),deleteUserPhoto:s=>y.delete(`/users/${s}/photo`)},Ue={submitAdmission:s=>y.post("/public/admission",s),getNotices:()=>y.get("/public/notices"),getClasses:()=>y.get("/public/classes")},ue={getMyClasses:s=>y.get(`/teacher/${s}/classes`),getMyStudents:s=>y.get(`/teacher/${s}/students`),getMySubjects:s=>y.get(`/teacher/${s}/subjects`),markAttendance:s=>L.markAttendance(s),getClassAttendance:s=>L.getAttendance({class_id:s}),createExam:s=>L.createExam(s),getMyExams:s=>y.get(`/teacher/${s}/exams`),recordExamResult:s=>L.createExamResult(s),uploadStudyMaterial:(s,a)=>y.post(`/teacher/${a}/study-materials`,s,{headers:{"Content-Type":"multipart/form-data"}}),getMyStudyMaterials:s=>y.get(`/teacher/${s}/study-materials`),updateStudyMaterial:(s,a,l)=>y.put(`/teacher/${s}/study-materials/${a}`,l),deleteStudyMaterial:(s,a)=>y.delete(`/teacher/${s}/study-materials/${a}`),getNotices:()=>L.getNotices({target_role:"teacher"}),getMySchedule:(s,a)=>{const l=a?`?day_of_week=${a}`:"";return y.get(`/teacher/${s}/schedule${l}`)},uploadUserPhoto:(s,a)=>y.post(`/users/${s}/photo`,a,{headers:{"Content-Type":"multipart/form-data"}}),deleteUserPhoto:s=>y.delete(`/users/${s}/photo`)},Ae={getMyProfile:s=>y.get(`/student/${s}/profile`),getMyAttendance:s=>y.get(`/student/${s}/attendance`),getMyExamResults:s=>y.get(`/student/${s}/exam-results`),getMySubjects:s=>y.get(`/student/${s}/subjects`),getStudyMaterials:s=>y.get(`/student/${s}/study-materials`),getNotices:s=>y.get(`/student/${s}/notices`),getMySchedule:(s,a)=>{const l=a?`?day_of_week=${a}`:"";return y.get(`/student/${s}/schedule${l}`)},uploadUserPhoto:(s,a)=>y.post(`/users/${s}/photo`,a,{headers:{"Content-Type":"multipart/form-data"}}),deleteUserPhoto:s=>y.delete(`/users/${s}/photo`)},v={dashboard:["dashboard"],students:["students"],teachers:["teachers"],classes:["classes"],subjects:["subjects"],notices:["notices"],exams:["exams"],examResults:["examResults"],studyMaterials:["studyMaterials"],attendance:["attendance"],teacherClasses:["teacherClasses"],classSchedules:["classSchedules"],teacherSchedule:["teacherSchedule"],studentSchedule:["studentSchedule"],admissionRequests:["admissionRequests"]},os=()=>te({queryKey:v.dashboard,queryFn:()=>L.getDashboardStats().then(s=>s.data)}),We=()=>te({queryKey:v.students,queryFn:()=>L.getStudents().then(s=>s.data)}),Ke=()=>te({queryKey:v.teachers,queryFn:()=>L.getTeachers().then(s=>s.data)}),Te=()=>te({queryKey:v.classes,queryFn:()=>L.getClasses().then(s=>s.data)}),Qe=()=>te({queryKey:v.subjects,queryFn:()=>L.getSubjects().then(s=>s.data)}),ms=(s={})=>te({queryKey:[...v.notices,s],queryFn:()=>L.getNotices(s).then(a=>a.data)}),us=()=>te({queryKey:v.admissionRequests,queryFn:()=>L.getAdmissionRequests().then(s=>s.data)}),zs=()=>te({queryKey:["notices","public"],queryFn:()=>Ue.getNotices().then(s=>s.data),staleTime:1e3*60*5,cacheTime:1e3*60*10}),Gs=(s={})=>te({queryKey:[...v.attendance,s],queryFn:()=>L.getAttendance(s).then(a=>a.data)}),Bs=(s={})=>te({queryKey:[...v.examResults,s],queryFn:async()=>(await L.getExamResults(s)).data.map(m=>({...m,obtained_marks:m.marks_obtained,student_id:m.student_id}))}),Hs=s=>te({queryKey:["teacherClasses",s],queryFn:()=>ue.getMyClasses(s).then(a=>a.data),enabled:!!s}),Vs=s=>te({queryKey:["teacherStudents",s],queryFn:()=>ue.getMyStudents(s).then(a=>a.data),enabled:!!s}),Ys=s=>te({queryKey:["teacherSubjects",s],queryFn:()=>ue.getMySubjects(s).then(a=>a.data)}),Ws=s=>te({queryKey:["teacherExams",s],queryFn:async()=>{const[a,l,m,_]=await Promise.all([ue.getMyExams(s),ue.getMyClasses(s),ue.getMySubjects(s),ue.getMyStudents(s)]),f=a.data,k=l.data,D=m.data,G=_.data;return f.map(U=>{const W=k.find(q=>q.id===U.class_id)||null,Z=D.find(q=>q.id===U.subject_id)||null,O=G.filter(q=>q.class_id===U.class_id).map(q=>({...q,name:q.user?.full_name||"Unknown Student"}));return{...U,title:U.name,total_marks:U.max_marks,subject:Z,class:W,students:O}})},enabled:!!s}),Js=s=>te({queryKey:["teacherMaterials",s],queryFn:()=>ue.getMyStudyMaterials(s).then(a=>a.data),enabled:!!s}),Xs=()=>te({queryKey:["teacherNotices"],queryFn:()=>ue.getNotices().then(s=>s.data)}),Zs=s=>te({queryKey:["studentExamResults",s],queryFn:async()=>(await Ae.getMyExamResults(s)).data.map(m=>({...m,obtained_marks:m.marks_obtained,exam:m.exam?{...m.exam,title:m.exam.name,total_marks:m.exam.max_marks,subject:m.exam.subject}:null})),enabled:!!s}),ea=s=>te({queryKey:["studentMaterials",s],queryFn:async()=>{const[a,l]=await Promise.all([Ae.getStudyMaterials(s),Ae.getMySubjects(s)]),m=a.data,_=l.data;return m.map(f=>{const k=_.find(D=>D.id===f.subject_id)||null;return{...f,subject:k}})},enabled:!!s}),sa=s=>te({queryKey:["studentNotices",s],queryFn:()=>Ae.getNotices(s).then(a=>a.data),enabled:!!s}),xs=()=>{const s=Y();return B({mutationFn:a=>L.createStudent(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.students}),s.invalidateQueries({queryKey:v.dashboard})}})},hs=()=>{const s=Y();return B({mutationFn:a=>L.createTeacher(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.teachers}),s.invalidateQueries({queryKey:v.dashboard})}})},ps=()=>{const s=Y();return B({mutationFn:a=>L.createClass(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.classes}),s.invalidateQueries({queryKey:v.teacherClasses}),s.invalidateQueries({queryKey:v.dashboard})}})},gs=()=>{const s=Y();return B({mutationFn:a=>L.createSubject(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.subjects}),s.invalidateQueries({queryKey:v.teacherClasses}),s.invalidateQueries({queryKey:v.dashboard})}})},ys=()=>{const s=Y();return B({mutationFn:a=>L.createNotice(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.notices}),s.invalidateQueries({queryKey:v.dashboard})}})},js=()=>{const s=Y();return B({mutationFn:({id:a,...l})=>L.updateNotice(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.notices}),s.invalidateQueries({queryKey:v.dashboard})}})},fs=()=>{const s=Y();return B({mutationFn:a=>L.deleteNotice(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.notices}),s.invalidateQueries({queryKey:v.dashboard})}})},bs=()=>{const s=Y();return B({mutationFn:a=>L.approveAdmissionRequest(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.admissionRequests}),s.invalidateQueries({queryKey:v.students}),s.invalidateQueries({queryKey:v.dashboard})}})},vs=()=>{const s=Y();return B({mutationFn:a=>L.rejectAdmissionRequest(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.admissionRequests}),s.invalidateQueries({queryKey:v.dashboard})}})},aa=()=>{const s=Y();return B({mutationFn:async a=>{if(Array.isArray(a)){const l=a.map(m=>L.markAttendance(m));return Promise.all(l)}else return ue.markAttendance(a)},onSuccess:()=>{s.invalidateQueries({queryKey:v.attendance})}})},ta=()=>{const s=Y();return B({mutationFn:a=>ue.createExam(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.exams}),s.invalidateQueries({queryKey:["teacherExams"]})}})},la=()=>{const s=Y();return B({mutationFn:({id:a,...l})=>L.updateExam(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.exams}),s.invalidateQueries({queryKey:["teacherExams"]})}})},ra=()=>{const s=Y();return B({mutationFn:a=>L.deleteExam(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.exams}),s.invalidateQueries({queryKey:["teacherExams"]})}})},na=()=>{const s=Y();return B({mutationFn:({formData:a,teacherId:l})=>ue.uploadStudyMaterial(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.studyMaterials}),s.invalidateQueries({queryKey:["teacherMaterials"]})}})},ia=()=>{const s=Y();return B({mutationFn:({teacherId:a,materialId:l,materialData:m})=>ue.updateStudyMaterial(a,l,m),onSuccess:()=>{s.invalidateQueries({queryKey:v.studyMaterials}),s.invalidateQueries({queryKey:["teacherMaterials"]})}})},ca=()=>{const s=Y();return B({mutationFn:({teacherId:a,materialId:l})=>ue.deleteStudyMaterial(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.studyMaterials}),s.invalidateQueries({queryKey:["teacherMaterials"]})}})},Ns=()=>{const s=Y();return B({mutationFn:({id:a,...l})=>L.updateStudent(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.students}),s.invalidateQueries({queryKey:v.dashboard})}})},ws=()=>{const s=Y();return B({mutationFn:a=>L.deleteStudent(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.students}),s.invalidateQueries({queryKey:v.dashboard})}})},Cs=()=>{const s=Y();return B({mutationFn:({studentId:a,password:l})=>L.updateStudentPassword(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.students})}})},_s=()=>{const s=Y();return B({mutationFn:({id:a,...l})=>L.updateTeacher(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.teachers}),s.invalidateQueries({queryKey:v.dashboard})}})},Ss=()=>{const s=Y();return B({mutationFn:a=>L.deleteTeacher(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.teachers}),s.invalidateQueries({queryKey:v.dashboard})}})},As=()=>{const s=Y();return B({mutationFn:({teacherId:a,password:l})=>L.updateTeacherPassword(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.teachers})}})},ks=()=>{const s=Y();return B({mutationFn:({id:a,...l})=>L.updateClass(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.classes}),s.invalidateQueries({queryKey:v.teacherClasses}),s.invalidateQueries({queryKey:v.dashboard})}})},qs=()=>{const s=Y();return B({mutationFn:a=>L.deleteClass(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.classes}),s.invalidateQueries({queryKey:v.dashboard})}})},da=()=>{const s=Y();return B({mutationFn:a=>L.createExamResult(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.examResults})}})},oa=()=>{const s=Y();return B({mutationFn:({id:a,...l})=>L.updateExamResult(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.examResults})}})},Ps=()=>{const s=Y();return B({mutationFn:({id:a,...l})=>L.updateSubject(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.subjects}),s.invalidateQueries({queryKey:v.teacherClasses}),s.invalidateQueries({queryKey:v.dashboard})}})},Es=()=>{const s=Y();return B({mutationFn:a=>L.deleteSubject(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.subjects}),s.invalidateQueries({queryKey:v.teacherClasses}),s.invalidateQueries({queryKey:v.dashboard})}})},ma=(s,a)=>te({queryKey:["classAttendance",s,a],queryFn:()=>L.getAttendance({class_id:s,date:a}).then(l=>l.data),enabled:!!s&&!!a}),ua=()=>{const s=Y();return B({mutationFn:({attendanceId:a,...l})=>L.updateAttendance(a,l),onSuccess:()=>{s.invalidateQueries({queryKey:v.attendance}),s.invalidateQueries({queryKey:["classAttendance"]})}})},Ts=(s={})=>te({queryKey:[...v.classSchedules,s],queryFn:()=>L.getClassSchedules(s).then(a=>a.data)}),Ds=()=>{const s=Y();return B({mutationFn:a=>L.createClassSchedule(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.classSchedules}),s.invalidateQueries({queryKey:v.teacherSchedule}),s.invalidateQueries({queryKey:v.studentSchedule})}})},Ms=()=>{const s=Y();return B({mutationFn:a=>L.deleteClassSchedule(a),onSuccess:()=>{s.invalidateQueries({queryKey:v.classSchedules}),s.invalidateQueries({queryKey:v.teacherSchedule}),s.invalidateQueries({queryKey:v.studentSchedule})}})},xa=(s,a)=>te({queryKey:[...v.teacherSchedule,s,a],queryFn:()=>ue.getMySchedule(s,a).then(l=>l.data),enabled:!!s}),ha=(s,a)=>te({queryKey:[...v.studentSchedule,s,a],queryFn:()=>Ae.getMySchedule(s,a).then(l=>l.data),enabled:!!s}),pa=()=>B({mutationFn:s=>Ue.submitAdmission(s)}),ga=()=>te({queryKey:["public","classes"],queryFn:()=>Ue.getClasses().then(s=>s.data)}),C=({label:s,type:a="text",error:l,className:m="",required:_=!1,...f})=>e.jsxs("div",{className:"space-y-1",children:[s&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[s,_&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:a,className:`block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${l?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${m}`,...f}),l&&e.jsx("p",{className:"text-sm text-red-600",children:l})]}),me=({label:s,options:a=[],error:l,className:m="",required:_=!1,placeholder:f="Select an option",...k})=>e.jsxs("div",{className:"space-y-1",children:[s&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[s,_&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("select",{className:`block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${l?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${m}`,...k,children:[e.jsx("option",{value:"",children:f}),a.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))]}),l&&e.jsx("p",{className:"text-sm text-red-600",children:l})]}),ya=({label:s,error:a,className:l="",required:m=!1,rows:_=3,...f})=>e.jsxs("div",{className:"space-y-1",children:[s&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[s,m&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{rows:_,className:`block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${a?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${l}`,...f}),a&&e.jsx("p",{className:"text-sm text-red-600",children:a})]}),ja=({onSubmit:s,className:a="",children:l,...m})=>e.jsx("form",{onSubmit:s,className:a,...m,children:l}),J=({isOpen:s,onClose:a,title:l,children:m,className:_=""})=>s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:a}),e.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl max-w-lg w-full max-h-screen overflow-y-auto ${_}`,children:[l&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:l})}),e.jsx("div",{className:"px-6 py-4",children:m})]})]}):null,fa=()=>{Ne();const{data:s,isLoading:a}=os(),{data:l,isLoading:m}=us(),_=bs(),f=vs(),[k,D]=j.useState(null),[G,U]=j.useState(!1),[W,Z]=j.useState(!1),[O,q]=j.useState(!1),[Q,$]=j.useState(!1),[E,R]=j.useState(null),d=w=>{D(w),Z(!0)},M=w=>{D(w),q(!0)},A=()=>{_.mutate(k.id,{onSuccess:w=>{R(w),Z(!1),$(!0)}})},p=()=>{f.mutate(k.id,{onSuccess:()=>{q(!1),D(null)}})},P=w=>{D(w),U(!0)};return a?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6",children:[e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex-shrink-0 mb-2 sm:mb-0",children:e.jsx(Se,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),e.jsxs("div",{className:"sm:ml-4",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:s?.total_students||0}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Students"})]})]})}),e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex-shrink-0 mb-2 sm:mb-0",children:e.jsx(Le,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})}),e.jsxs("div",{className:"sm:ml-4",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:s?.total_teachers||0}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Teachers"})]})]})}),e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex-shrink-0 mb-2 sm:mb-0",children:e.jsx(Be,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})}),e.jsxs("div",{className:"sm:ml-4",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:s?.total_classes||0}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Classes"})]})]})}),e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[e.jsx("div",{className:"flex-shrink-0 mb-2 sm:mb-0",children:e.jsx($e,{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-600"})}),e.jsxs("div",{className:"sm:ml-4",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:s?.total_subjects||0}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Subjects"})]})]})})]}),e.jsxs(b,{children:[e.jsx(b.Header,{className:"p-4 sm:p-6 pb-2 sm:pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[e.jsxs(b.Title,{className:"text-lg sm:text-xl font-semibold flex items-center",children:[e.jsx(Oe,{className:"h-5 w-5 mr-2 text-blue-600"}),"Pending Admission Requests"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[l?.length||0," pending"]})]})}),e.jsx(b.Content,{className:"p-0",children:m?e.jsx("div",{className:"p-4 sm:p-6 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):l&&l.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:l.map(w=>e.jsx("div",{className:"p-4 sm:p-6 hover:bg-gray-50 transition-colors duration-150",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm sm:text-base mb-1",children:w.full_name}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["📧 ",w.email||"No email provided"]}),e.jsxs("p",{children:["📱 ",w.parent_phone]}),e.jsxs("p",{children:["📅 Applied: ",new Date(w.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 sm:gap-2",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>P(w),className:"flex items-center justify-center",children:[e.jsx(ye,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Details"})]}),e.jsxs(i,{size:"sm",variant:"success",onClick:()=>d(w),disabled:_.isPending,className:"flex items-center justify-center",children:[e.jsx(Re,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Approve"})]}),e.jsxs(i,{size:"sm",variant:"danger",onClick:()=>M(w),disabled:f.isPending,className:"flex items-center justify-center",children:[e.jsx(Ee,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Reject"})]})]})]})},w.id))}):e.jsx("div",{className:"p-4 sm:p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 sm:py-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:e.jsx(Oe,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base font-medium",children:"No pending admission requests"}),e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mt-1",children:"New requests will appear here when submitted"})]})})})]}),e.jsxs(b,{children:[e.jsx(b.Header,{className:"p-4 sm:p-6 pb-2 sm:pb-4",children:e.jsx(b.Title,{className:"text-lg sm:text-xl font-semibold",children:"Recent Notices"})}),e.jsx(b.Content,{className:"p-0",children:s?.recent_notices&&s.recent_notices.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:s.recent_notices.map((w,ee)=>e.jsxs("div",{className:"p-4 sm:p-6 border-l-4 border-blue-500 hover:bg-gray-50 transition-colors duration-150",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm sm:text-base leading-tight mb-1 sm:mb-2",children:w.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 leading-relaxed mb-2 sm:mb-3",children:window.innerWidth<640?w.content.substring(0,60)+(w.content.length>60?"...":""):w.content.substring(0,120)+(w.content.length>120?"...":"")})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:new Date(w.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:window.innerWidth>=640?"numeric":"2-digit"})})})]}),w.priority&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w.priority==="high"?"bg-red-100 text-red-800":w.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[w.priority.charAt(0).toUpperCase()+w.priority.slice(1)," Priority"]})})]},w.id))}):e.jsx("div",{className:"p-4 sm:p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 sm:py-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:e.jsx($e,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base font-medium",children:"No recent notices"}),e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm mt-1",children:"New notices will appear here when created"})]})})})]}),e.jsx(J,{isOpen:W,onClose:()=>Z(!1),title:"Confirm Approval",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Re,{className:"h-6 w-6 text-green-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Approve Admission Request"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This will create a student account with auto-generated credentials."})]})]}),k&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:k.full_name}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Class:"})," ",k.class_assigned?.name||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",k.email||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Parent Phone:"})," ",k.parent_phone]})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"What happens next:"}),e.jsx("br",{}),"• Student account will be created automatically",e.jsx("br",{}),"• Username, password, and roll number will be generated",e.jsx("br",{}),"• Student will be enrolled in the selected class"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(i,{variant:"success",onClick:A,disabled:_.isPending,children:_.isPending?"Creating Account...":"Approve & Create Account"})]})]})}),e.jsx(J,{isOpen:O,onClose:()=>q(!1),title:"Confirm Rejection",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ee,{className:"h-6 w-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reject Admission Request"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone."})]})]}),k&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:k.full_name}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Class:"})," ",k.class_assigned?.name||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",k.email||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Parent Phone:"})," ",k.parent_phone]})]})]}),e.jsx("div",{className:"bg-red-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Warning:"})," This will permanently reject the admission request. The applicant will need to submit a new application if they wish to reapply."]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(i,{variant:"danger",onClick:p,disabled:f.isPending,children:f.isPending?"Rejecting...":"Reject Request"})]})]})}),e.jsx(J,{isOpen:Q,onClose:()=>{$(!1),R(null),D(null)},title:"Admission Approved Successfully",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Re,{className:"h-8 w-8 text-green-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Student Account Created"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please save these credentials and share them with the student."})]})]}),E&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Generated Credentials"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Username:"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-green-900 font-mono",children:E.username})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Password:"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-green-900 font-mono",children:E.password})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-green-800",children:"Roll Number:"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-green-900 font-mono",children:E.roll_number})]})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Important:"})," Make sure to securely share these credentials with the student. They can use them to log in and access their account."]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(i,{onClick:()=>{$(!1),R(null),D(null)},children:"Done"})})]})}),e.jsx(J,{isOpen:G,onClose:()=>U(!1),title:"Admission Request Details",children:e.jsx("div",{className:"space-y-4",children:k&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:k.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:k.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parent Phone"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:k.parent_phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:new Date(k.date_of_birth).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:k.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Application Date"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:new Date(k.created_at).toLocaleString()})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(i,{variant:"outline",onClick:()=>U(!1),children:"Close"})})]})})})]})},x=({children:s,className:a="",...l})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:`min-w-full divide-y divide-gray-200 ${a}`,...l,children:s})}),Rs=({children:s,className:a="",...l})=>e.jsx("thead",{className:`bg-gray-50 ${a}`,...l,children:s}),Fs=({children:s,className:a="",...l})=>e.jsx("tbody",{className:`bg-white divide-y divide-gray-200 ${a}`,...l,children:s}),Ls=({children:s,className:a="",...l})=>e.jsx("tr",{className:`hover:bg-gray-50 ${a}`,...l,children:s}),$s=({children:s,className:a="",...l})=>e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${a}`,...l,children:s}),Is=({children:s,className:a="",...l})=>e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 ${a}`,...l,children:s});x.Header=Rs;x.Body=Fs;x.Row=Ls;x.Head=$s;x.Cell=Is;const ba=()=>{const s=Ne(),{data:a,isLoading:l}=We(),{data:m}=Te(),{data:_}=Ke(),f=xs(),k=Ns(),D=ws(),G=Cs(),[U,W]=j.useState(!1),[Z,O]=j.useState(!1),[q,Q]=j.useState(!1),[$,E]=j.useState(!1),[R,d]=j.useState(!1),[M,A]=j.useState(!1),[p,P]=j.useState(null),[w,ee]=j.useState(null),[le,se]=j.useState(""),[u,H]=j.useState(""),[ae,h]=j.useState("name"),[c,N]=j.useState({user:{username:"",email:"",full_name:"",phone:"",password:""},roll_number:"",parent_name:"",parent_phone:"",address:"",class_id:"",date_of_birth:""}),[S,F]=j.useState(null),ie=(a||[]).filter(t=>{const T=!le||t.user?.full_name?.toLowerCase().includes(le.toLowerCase())||t.roll_number?.toLowerCase().includes(le.toLowerCase())||t.user?.username?.toLowerCase().includes(le.toLowerCase())||t.parent_name?.toLowerCase().includes(le.toLowerCase()),z=!u||t.class_id===parseInt(u);return T&&z}).sort((t,T)=>{switch(ae){case"name":return(t.user?.full_name||"").localeCompare(T.user?.full_name||"");case"roll":return(t.roll_number||"").localeCompare(T.roll_number||"");case"class":return t.class_id-T.class_id;default:return 0}}),je=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let T="";for(let z=0;z<8;z++)T+=t.charAt(Math.floor(Math.random()*t.length));return T},fe=t=>{try{if(!t||typeof t!="string")return"";const z=t.toLowerCase().replace(/[^a-z\s]/g,"").trim().split(/\s+/).filter(ne=>ne.length>0);if(z.length===0)return`user${Math.floor(Math.random()*1e4)}`;let r="";if(z.length===1)r=z[0];else{const ne=z[0],xe=z[z.length-1].charAt(0);r=ne+xe}const X=new Set;a&&a.forEach(ne=>{ne.user?.username&&X.add(ne.user.username.toLowerCase())}),_&&_.forEach(ne=>{ne.user?.username&&X.add(ne.user.username.toLowerCase())});let V=r,re=1;const ge=z.length>1?z[0]+z[z.length-1]:r;for(X.has(ge.toLowerCase())&&r!==ge&&(V=`${r}1`,re=2);X.has(V.toLowerCase());)V=`${r}${re}`,re++;return V}catch(T){return oe.error("Error generating username:",T),`user${Math.floor(Math.random()*1e4)}`}},o=t=>{if(!t||!a)return"";const T=a.filter(xe=>xe.class_id===t),z=m?.find(xe=>xe.id===t);if(!z)return"";const r=z.grade||10,V=(z.section||"A").charAt(0).toUpperCase(),re=`${r}${V}`,ge=T.map(xe=>{const pe=(xe.roll_number||"").match(/(\d+)$/);return pe?parseInt(pe[1]):0}).filter(xe=>!isNaN(xe)&&xe>0);let ne=1;for(;ge.includes(ne);)ne++;return`${re}${ne.toString().padStart(2,"0")}`},K=async t=>{t.preventDefault();try{if(!c.user.full_name?.trim()){g.error("Full name is required");return}if(!c.user.username?.trim()){g.error("Username is required");return}if(!c.user.password?.trim()){g.error("Password is required");return}if(!c.user.phone?.trim()){g.error("Phone number is required");return}if(!c.roll_number?.trim()){g.error("Roll number is required");return}if(!c.class_id){g.error("Class selection is required");return}if(!c.parent_phone?.trim()){g.error("Parent phone number is required");return}const T={user:{username:c.user.username.trim(),email:c.user.email.trim(),full_name:c.user.full_name.trim(),phone:c.user.phone?.trim()||"",password:c.user.password.trim(),role:"student"},roll_number:c.roll_number.trim(),parent_name:c.parent_name?.trim()||"",parent_phone:c.parent_phone?.trim()||"",address:c.address?.trim()||"",class_id:parseInt(c.class_id),date_of_birth:c.date_of_birth?new Date(c.date_of_birth).toISOString():null},z=await f.mutateAsync(T);ee({fullName:c.user.full_name,username:c.user.username,password:c.user.password,rollNumber:c.roll_number,email:c.user.email}),W(!1),N({user:{username:"",email:"",full_name:"",phone:"",password:""},roll_number:"",parent_name:"",parent_phone:"",address:"",class_id:"",date_of_birth:""}),E(!0),g.success("Student created successfully!")}catch(T){if(oe.error("Error creating student:",T),T.response){oe.error("Server response:",T.response.data);const z=T.response.data?.detail||T.response.data?.message||"Server error occurred";g.error(`Failed to create student: ${z}`)}else T.message?g.error(`Error: ${T.message}`):g.error("Failed to create student. Please check the form data and try again.")}},ce=()=>{if(!w)return;const t=`Student Login Credentials
Name: ${w.fullName}
Username: ${w.username}
Password: ${w.password}
Roll Number: ${w.rollNumber}

Please keep these credentials safe and change the password after first login.`;navigator.clipboard.writeText(t).then(()=>{g.success("Credentials copied to clipboard!")}).catch(()=>{g.error("Failed to copy credentials")})},n=()=>{if(!w)return;const t=window.open("","_blank");t.document.write(`
      <html>
        <head>
          <title>Student Login Credentials</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            .header { text-align: center; margin-bottom: 30px; }
            .credentials { border: 2px solid #000; padding: 20px; margin: 20px 0; }
            .field { margin: 10px 0; font-size: 16px; }
            .label { font-weight: bold; }
            .note { margin-top: 30px; font-style: italic; color: #666; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>Science Point - Student Login Credentials</h1>
          </div>
          <div class="credentials">
            <div class="field"><span class="label">Student Name:</span> ${w.fullName}</div>
            <div class="field"><span class="label">Roll Number:</span> ${w.rollNumber}</div>
            <div class="field"><span class="label">Username:</span> ${w.username}</div>
            <div class="field"><span class="label">Password:</span> ${w.password}</div>
          </div>
          <div class="note">
            <p><strong>Important:</strong></p>
            <ul>
              <li>Please keep these credentials safe and secure</li>
              <li>Change the password after first login</li>
              <li>Contact administration if you have any login issues</li>
            </ul>
          </div>
        </body>
      </html>
    `),t.document.close(),t.print()},I=t=>{P(t),O(!0)},de=t=>{F({id:t.id,user:{username:t.user?.username||"",email:t.user?.email||"",full_name:t.user?.full_name||"",phone:t.user?.phone||""},roll_number:t.roll_number||"",parent_name:t.parent_name||"",parent_phone:t.parent_phone||"",address:t.address||"",class_id:t.class_id||"",date_of_birth:t.date_of_birth?t.date_of_birth.split("T")[0]:""}),Q(!0)},be=async t=>{t.preventDefault();try{if(!S.user.full_name?.trim()){g.error("Full name is required");return}if(!S.roll_number?.trim()){g.error("Roll number is required");return}if(!S.class_id){g.error("Class selection is required");return}if(!S.user.phone?.trim()){g.error("Phone number is required");return}if(!S.parent_phone?.trim()){g.error("Parent phone number is required");return}const T={user:{username:S.user.username.trim(),email:S.user.email.trim(),full_name:S.user.full_name.trim(),phone:S.user.phone?.trim()||""},roll_number:S.roll_number.trim(),parent_name:S.parent_name?.trim()||"",parent_phone:S.parent_phone?.trim()||"",address:S.address?.trim()||"",class_id:parseInt(S.class_id),date_of_birth:S.date_of_birth?new Date(S.date_of_birth).toISOString():null};await k.mutateAsync({id:S.id,...T}),Q(!1),F(null),g.success("Student updated successfully!")}catch(T){if(oe.error("Error updating student:",T),T.response){const z=T.response.data?.detail||T.response.data?.message||"Server error occurred";g.error(`Failed to update student: ${z}`)}else T.message?g.error(`Error: ${T.message}`):g.error("Failed to update student. Please check the form data and try again.")}},ke=t=>{P(t),d(!0)},qe=async()=>{try{await D.mutateAsync(p.id),d(!1),P(null),g.success("Student deleted successfully!")}catch(t){if(oe.error("Error deleting student:",t),t.response){const T=t.response.data?.detail||t.response.data?.message||"Server error occurred";g.error(`Failed to delete student: ${T}`)}else t.message?g.error(`Error: ${t.message}`):g.error("Failed to delete student. Please try again.")}},_e=t=>{P(t),A(!0)},De=async()=>{try{const t=je(),T={fullName:p.user?.full_name||"Unknown",username:p.user?.username||"unknown",password:t,rollNumber:p.roll_number||"N/A",email:p.user?.email||"N/A"};await G.mutateAsync({studentId:p.id,password:t}),ee(T),A(!1),P(null),E(!0),g.success("Password reset successfully!")}catch(t){oe.error("Error resetting password:",t),g.error("Failed to reset password. Please try again.")}};return l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>s("/admin"),className:"lg:hidden",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Students"})]}),e.jsxs(i,{onClick:()=>W(!0),size:"sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Student"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, roll number, username, or parent name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:le,onChange:t=>se(t.target.value)})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:t=>H(t.target.value),children:[e.jsx("option",{value:"",children:"All Classes"}),m?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ae,onChange:t=>h(t.target.value),children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"roll",children:"Sort by Roll Number"}),e.jsx("option",{value:"class",children:"Sort by Class"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",ie.length," of ",a?.length||0," students"]}),(le||u||ae!=="name")&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{se(""),H(""),h("name")},children:"Clear Filters"})]})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:ie&&ie.length>0?ie.map(t=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center flex-shrink-0",children:t.user?.photo_path?e.jsx("img",{src:`/uploads/${t.user.photo_path}`,alt:`${t.user?.full_name||"Student"} profile`,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-600 font-medium",children:(t.user?.full_name||"S").charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:t.user?.full_name||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Roll: ",t.roll_number]})]}),e.jsxs("div",{className:"flex gap-1 flex-wrap ml-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>I(t),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>de(t),children:"Edit"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>_e(t),className:"text-orange-600 hover:bg-orange-50",title:"Reset Password",children:"Reset PWD"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>ke(t),children:"Delete"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-2",children:[e.jsxs("p",{children:["Email: ",t.user?.email||"N/A"]}),e.jsxs("p",{children:["Username: ",t.user?.username||"N/A"]}),e.jsxs("p",{children:["Phone: ",t.user?.phone||"N/A"]}),e.jsxs("p",{children:["Parent Name: ",t.parent_name||"N/A"]}),e.jsxs("p",{children:["Parent Phone: ",t.parent_phone||"N/A"]}),e.jsxs("p",{children:["Address: ",t.address||"N/A"]}),e.jsxs("p",{children:["Class: ",m?.find(T=>T.id===t.class_id)?.name||`Class ${t.class_id}`||"N/A"]})]})]})]})},t.id)):e.jsx(b,{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No students found matching your filters."})})}),e.jsx(b,{className:"hidden sm:block",children:e.jsx(b.Content,{className:"p-0",children:ie&&ie.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(x,{children:[e.jsx(x.Header,{children:e.jsxs(x.Row,{children:[e.jsx(x.Head,{children:"Photo"}),e.jsx(x.Head,{children:"Roll Number"}),e.jsx(x.Head,{children:"Full Name"}),e.jsx(x.Head,{className:"hidden md:table-cell",children:"Username"}),e.jsx(x.Head,{className:"hidden lg:table-cell",children:"Phone"}),e.jsx(x.Head,{children:"Parent Name"}),e.jsx(x.Head,{children:"Parent Phone"}),e.jsx(x.Head,{children:"Address"}),e.jsx(x.Head,{children:"Class"}),e.jsx(x.Head,{children:"Actions"})]})}),e.jsx(x.Body,{children:ie.map(t=>e.jsxs(x.Row,{children:[e.jsx(x.Cell,{children:e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:t.user?.photo_path?e.jsx("img",{src:`/uploads/${t.user.photo_path}`,alt:`${t.user?.full_name||"Student"} profile`,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-600 font-medium text-sm",children:(t.user?.full_name||"S").charAt(0).toUpperCase()})})}),e.jsx(x.Cell,{children:t.roll_number}),e.jsx(x.Cell,{children:t.user?.full_name||"N/A"}),e.jsx(x.Cell,{className:"hidden md:table-cell",children:t.user?.username||"N/A"}),e.jsx(x.Cell,{className:"hidden lg:table-cell",children:t.user?.phone||"N/A"}),e.jsx(x.Cell,{children:t.parent_name||"N/A"}),e.jsx(x.Cell,{children:t.parent_phone||"N/A"}),e.jsx(x.Cell,{children:t.address||"N/A"}),e.jsx(x.Cell,{children:m?.find(T=>T.id===t.class_id)?.name||`Class ${t.class_id}`||"N/A"}),e.jsx(x.Cell,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>I(t),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>de(t),children:"Edit"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>_e(t),className:"text-orange-600 hover:bg-orange-50",title:"Reset Password",children:"Reset"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>ke(t),children:"Delete"})]})})]},t.id))})]})}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No students found matching your filters."})})})}),e.jsx(J,{isOpen:U,onClose:()=>W(!1),title:"Add New Student",className:"sm:max-w-md",children:e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsx(C,{label:"Full Name",type:"text",name:"full_name",id:"student_full_name",autoComplete:"name",inputMode:"text",spellCheck:"true",placeholder:"Enter student's full name (e.g., John Doe)",value:c.user.full_name||"",onChange:t=>{const T=t.target.value;N(z=>({...z,user:{...z.user,full_name:T}})),T&&T.trim().length>1&&setTimeout(()=>{try{const z=fe(T);z&&N(r=>({...r,user:{...r.user,username:z}}))}catch(z){oe.error("Username generation error:",z)}},300)},required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{label:"Username",type:"text",value:c.user.username,onChange:t=>N({...c,user:{...c.user,username:t.target.value}}),required:!0,placeholder:"Auto-generated from full name"}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>N({...c,user:{...c.user,username:fe(c.user.full_name)}}),className:"text-xs",disabled:!c.user.full_name,children:c.user.full_name?"Generate unique username":"Enter name first"})]}),e.jsx(C,{label:"Email",type:"email",value:c.user.email,onChange:t=>N({...c,user:{...c.user,email:t.target.value}})}),e.jsx(C,{label:"Phone Number",type:"tel",value:c.user.phone,onChange:t=>N({...c,user:{...c.user,phone:t.target.value}}),required:!0,placeholder:"Enter student's phone number"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{label:"Password",type:"password",value:c.user.password,onChange:t=>N({...c,user:{...c.user,password:t.target.value}}),required:!0,placeholder:"Enter password or generate one"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>N({...c,user:{...c.user,password:je()}}),className:"text-xs",children:"Generate Secure Password"}),c.user.password&&e.jsx(i,{type:"button",variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(c.user.password),g.success("Password copied!")},className:"text-xs",children:"Copy Password"})]}),c.user.password&&e.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded border",children:[e.jsx("strong",{children:"Password:"})," ",c.user.password]})]}),e.jsx(me,{label:"Class",value:c.class_id,onChange:t=>{const T=parseInt(t.target.value);N({...c,class_id:T,roll_number:c.roll_number?c.roll_number:o(T)})},options:m?.map(t=>({value:t.id,label:t.name}))||[],required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{label:"Roll Number",type:"text",value:c.roll_number,onChange:t=>N({...c,roll_number:t.target.value}),required:!0,placeholder:"e.g., 10A01, 9B03 (auto-generated)"}),c.roll_number&&!/^\d{1,2}[A-Z]{1,2}\d{1,2}$/.test(c.roll_number)&&e.jsx("div",{className:"text-xs text-orange-600",children:"Roll number format: GradeSection + Number (e.g., 10A01, 9B03)"}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>N({...c,roll_number:o(c.class_id)}),disabled:!c.class_id,className:"text-xs",children:c.class_id?"Generate next roll number":"Select class first"})]}),e.jsx(C,{label:"Parent Name",type:"text",placeholder:"Enter parent's full name",value:c.parent_name,onChange:t=>N({...c,parent_name:t.target.value})}),e.jsx(C,{label:"Parent Phone",type:"tel",placeholder:"Enter parent's phone number",value:c.parent_phone,onChange:t=>N({...c,parent_phone:t.target.value}),required:!0}),e.jsx(C,{label:"Address",type:"text",placeholder:"Enter full address",value:c.address,onChange:t=>N({...c,address:t.target.value})}),e.jsx(C,{label:"Date of Birth",type:"date",value:c.date_of_birth,onChange:t=>N({...c,date_of_birth:t.target.value})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>W(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:f.isPending,children:"Create Student"})]})]})}),e.jsx(J,{isOpen:Z,onClose:()=>O(!1),title:"",className:"sm:max-w-2xl",children:p?e.jsxs("div",{className:"max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 -m-6 mb-6 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-3",children:e.jsx(Se,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:p.user?.full_name||"Student Details"}),e.jsxs("p",{className:"text-blue-100",children:["Roll Number: ",p.roll_number]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Se,{className:"h-5 w-5 text-blue-600 mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:p.user?.full_name||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Username"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded text-sm",children:p.user?.username||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Roll Number"}),e.jsx("p",{className:"text-gray-900 font-medium",children:p.roll_number||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Class"}),e.jsx("p",{className:"text-gray-900 font-medium",children:m?.find(t=>t.id===p?.class_id)?.name||`Class ${p?.class_id}`||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),e.jsx("p",{className:"text-gray-900",children:p.date_of_birth?new Date(p.date_of_birth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Xe,{className:"h-5 w-5 text-green-600 mr-2"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),e.jsx("p",{className:"text-gray-900 break-all",children:p.user?.email||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Username"}),e.jsx("p",{className:"text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded text-sm",children:p.user?.username||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),e.jsx("p",{className:"text-gray-900",children:p.user?.phone||"N/A"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Address"}),e.jsx("p",{className:"text-gray-900 bg-white p-3 rounded border",children:p.address||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Se,{className:"h-5 w-5 text-purple-600 mr-2"}),"Parent Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Parent Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:p.parent_name||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Parent Phone"}),e.jsx("p",{className:"text-gray-900",children:p.parent_phone||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Pe,{className:"h-5 w-5 text-blue-600 mr-2"}),"Account Status"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Active Account"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Student ID: #",p.id]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end pt-6 mt-6 border-t",children:[e.jsxs(i,{variant:"outline",onClick:()=>{O(!1),de(p)},className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Edit Student"]}),e.jsxs(i,{variant:"outline",onClick:()=>{O(!1),_e(p)},className:"flex items-center gap-2 text-orange-600 hover:bg-orange-50",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Reset Password"]}),e.jsxs(i,{onClick:()=>O(!1),className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Close"]})]})]}):e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}),e.jsx(J,{isOpen:q,onClose:()=>{Q(!1),F(null)},title:"Edit Student",className:"sm:max-w-md",children:S&&e.jsxs("form",{onSubmit:be,className:"space-y-4",children:[e.jsx(C,{label:"Full Name",type:"text",value:S.user.full_name||"",onChange:t=>F({...S,user:{...S.user,full_name:t.target.value}}),required:!0}),e.jsx(C,{label:"Username",type:"text",value:S.user.username||"",onChange:t=>F({...S,user:{...S.user,username:t.target.value}}),required:!0}),e.jsx(C,{label:"Email",type:"email",value:S.user.email||"",onChange:t=>F({...S,user:{...S.user,email:t.target.value}})}),e.jsx(C,{label:"Phone",type:"tel",value:S.user.phone||"",onChange:t=>F({...S,user:{...S.user,phone:t.target.value}}),required:!0}),e.jsx(C,{label:"Roll Number",type:"text",value:S.roll_number||"",onChange:t=>F({...S,roll_number:t.target.value}),required:!0}),e.jsx(me,{label:"Class",value:S.class_id||"",onChange:t=>F({...S,class_id:parseInt(t.target.value)}),options:m?.map(t=>({value:t.id,label:t.name}))||[],required:!0}),e.jsx(C,{label:"Parent Name",type:"text",value:S.parent_name||"",onChange:t=>F({...S,parent_name:t.target.value})}),e.jsx(C,{label:"Parent Phone",type:"tel",value:S.parent_phone||"",onChange:t=>F({...S,parent_phone:t.target.value}),required:!0}),e.jsx(C,{label:"Address",type:"text",value:S.address||"",onChange:t=>F({...S,address:t.target.value})}),e.jsx(C,{label:"Date of Birth",type:"date",value:S.date_of_birth||"",onChange:t=>F({...S,date_of_birth:t.target.value})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>{Q(!1),F(null)},disabled:k.isPending,children:"Cancel"}),e.jsx(i,{type:"submit",loading:k.isPending,children:"Update Student"})]})]})}),e.jsx(J,{isOpen:$,onClose:()=>{E(!1),ee(null)},title:"Student Account Created Successfully!",className:"sm:max-w-lg",children:w&&e.jsxs("div",{className:"space-y-6 p-2 sm:p-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Pe,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-green-900",children:"Account Created"})]}),e.jsx("p",{className:"text-green-800 text-sm",children:"Student account has been created successfully. Please share these login credentials with the student."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Login Credentials"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Student Name:"}),e.jsx("span",{className:"text-gray-900",children:w.fullName})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Roll Number:"}),e.jsx("span",{className:"text-gray-900",children:w.rollNumber})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Username:"}),e.jsx("span",{className:"text-gray-900 font-mono",children:w.username})]}),e.jsxs("div",{className:"flex justify-between items-center bg-yellow-50 p-2 rounded border",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Password:"}),e.jsx("span",{className:"text-gray-900 font-mono",children:w.password})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsxs(i,{variant:"outline",onClick:ce,className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Copy Credentials"]}),e.jsxs(i,{variant:"outline",onClick:n,className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Print Credentials"]}),e.jsx(i,{onClick:()=>{E(!1),ee(null),g.success("Student account ready for use!")},children:"Done"})]})]})}),e.jsx(J,{isOpen:R,onClose:()=>{d(!1),P(null)},title:"Confirm Delete Student",className:"sm:max-w-md",children:p&&e.jsxs("div",{className:"space-y-4 p-2 sm:p-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(es,{className:"h-5 w-5 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-red-900",children:"Delete Student"})})]}),e.jsxs("p",{className:"text-red-800 text-sm",children:["Are you sure you want to delete ",e.jsx("strong",{children:p.user?.full_name}),"? This action cannot be undone and will permanently remove all student data including:"]}),e.jsxs("ul",{className:"text-red-800 text-sm mt-2 ml-4 list-disc",children:[e.jsx("li",{children:"Student profile and account"}),e.jsx("li",{children:"Academic records and grades"}),e.jsx("li",{children:"Attendance history"}),e.jsx("li",{children:"Assignment submissions"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Student Details:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",p.user?.full_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Roll Number:"})," ",p.roll_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Class:"})," ",p.class_id]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>{d(!1),P(null)},disabled:D.isPending,children:"Cancel"}),e.jsx(i,{variant:"destructive",onClick:qe,loading:D.isPending,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Student"})]})]})}),e.jsx(J,{isOpen:M,onClose:()=>{A(!1),P(null)},title:"Reset Student Password",className:"sm:max-w-md",children:p&&e.jsxs("div",{className:"space-y-4 p-2 sm:p-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ye,{className:"h-5 w-5 text-orange-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-orange-900",children:"Reset Password"})})]}),e.jsxs("p",{className:"text-orange-800 text-sm",children:["Are you sure you want to reset the password for ",e.jsx("strong",{children:p.user?.full_name}),"?"]}),e.jsxs("div",{className:"mt-3 text-orange-800 text-sm",children:[e.jsx("p",{children:e.jsx("strong",{children:"What will happen:"})}),e.jsxs("ul",{className:"ml-4 list-disc mt-1",children:[e.jsx("li",{children:"A new secure password will be generated"}),e.jsx("li",{children:"The student's current password will be invalidated"}),e.jsx("li",{children:"New credentials will be displayed for sharing"}),e.jsx("li",{children:"Student must use the new password for login"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Student Details:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",p.user?.full_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Username:"})," ",p.user?.username]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Roll Number:"})," ",p.roll_number]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>{A(!1),P(null)},disabled:G.isPending,children:"Cancel"}),e.jsx(i,{onClick:De,loading:G.isPending,className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Reset Password"})]})]})})]})},va=()=>{const s=Ne(),{data:a,isLoading:l}=Ke(),{data:m}=We(),_=hs(),f=_s(),k=Ss(),D=As(),[G,U]=j.useState(!1),[W,Z]=j.useState(!1),[O,q]=j.useState(!1),[Q,$]=j.useState(!1),[E,R]=j.useState(!1),[d,M]=j.useState(!1),[A,p]=j.useState(null),[P,w]=j.useState(null),[ee,le]=j.useState(""),[se,u]=j.useState(""),[H,ae]=j.useState(""),[h,c]=j.useState("name"),[N,S]=j.useState(()=>({user:{username:"",email:"",full_name:"",phone:"",password:""},employee_id:"",qualification:"",experience_years:0,salary:0})),[F,ie]=j.useState(()=>({user:{username:"",email:"",full_name:"",phone:""},qualification:"",experience_years:0,salary:0})),[je,fe]=j.useState({password:"",confirmPassword:""}),o=(a||[]).filter(r=>{const X=!ee||r.user?.full_name?.toLowerCase().includes(ee.toLowerCase())||r.user?.email?.toLowerCase().includes(ee.toLowerCase())||r.employee_id?.toLowerCase().includes(ee.toLowerCase())||r.qualification?.toLowerCase().includes(ee.toLowerCase()),V=!se||r.qualification?.toLowerCase().includes(se.toLowerCase()),re=!H||H==="0-2"&&r.experience_years>=0&&r.experience_years<=2||H==="3-5"&&r.experience_years>=3&&r.experience_years<=5||H==="6-10"&&r.experience_years>=6&&r.experience_years<=10||H==="10+"&&r.experience_years>10;return X&&V&&re}).sort((r,X)=>{switch(h){case"name":return(r.user?.full_name||"").localeCompare(X.user?.full_name||"");case"employee_id":return(r.employee_id||"").localeCompare(X.employee_id||"");case"experience":return X.experience_years-r.experience_years;case"qualification":return(r.qualification||"").localeCompare(X.qualification||"");default:return 0}}),K=()=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let X="";for(let V=0;V<8;V++)X+=r.charAt(Math.floor(Math.random()*r.length));return X},ce=r=>{try{if(!r||typeof r!="string")return"";const V=r.toLowerCase().replace(/[^a-z\s]/g,"").trim().split(/\s+/).filter(pe=>pe.length>0);if(V.length===0)return`user${Math.floor(Math.random()*1e4)}`;let re="";if(V.length===1)re=V[0];else{const pe=V[0],Je=V[V.length-1].charAt(0);re=pe+Je}const ge=new Set;a&&a.forEach(pe=>{pe.user?.username&&ge.add(pe.user.username.toLowerCase())}),m&&m.forEach(pe=>{pe.user?.username&&ge.add(pe.user.username.toLowerCase())});let ne=re,xe=1;const Me=V.length>1?V[0]+V[V.length-1]:re;for(ge.has(Me.toLowerCase())&&re!==Me&&(ne=`${re}1`,xe=2);ge.has(ne.toLowerCase());)ne=`${re}${xe}`,xe++;return ne}catch{return`user${Math.floor(Math.random()*1e4)}`}},n=()=>{if(!a)return"";const r=a.map(re=>{const ne=(re.employee_id||"").match(/T(\d+)$/);return ne?parseInt(ne[1]):0}).filter(re=>!isNaN(re));return`T${((r.length>0?Math.max(...r):0)+1).toString().padStart(3,"0")}`},I=async r=>{r.preventDefault();try{const X={...N,user:{...N.user,role:"teacher"}},V=await _.mutateAsync(X);w({fullName:N.user.full_name,username:N.user.username,password:N.user.password,employeeId:N.employee_id,email:N.user.email}),U(!1),S({user:{username:"",email:"",full_name:"",phone:"",password:K()},employee_id:n(),qualification:"",experience_years:0,salary:0}),M(!0),g.success("Teacher created successfully!")}catch{g.error("Failed to create teacher. Please try again.")}},de=r=>{p(r),Z(!0)},be=r=>{p(r),ie({user:{username:r.user?.username||"",email:r.user?.email||"",full_name:r.user?.full_name||"",phone:r.user?.phone||""},qualification:r.qualification||"",experience_years:r.experience_years||0,salary:r.salary||0}),q(!0)},ke=r=>{p(r),$(!0)},qe=r=>{p(r),R(!0)},_e=async()=>{try{const r=K(),X={fullName:A.user?.full_name||"Unknown",username:A.user?.username||"unknown",password:r,employeeId:A.employee_id||"N/A",email:A.user?.email||"N/A"};await D.mutateAsync({teacherId:A.id,password:r}),w(X),R(!1),p(null),M(!0),g.success("Password reset successfully!")}catch{g.error("Failed to reset password. Please try again.")}},De=async r=>{r.preventDefault();try{await f.mutateAsync({id:A.id,user:F.user,qualification:F.qualification,experience_years:F.experience_years,salary:F.salary}),q(!1),p(null),g.success("Teacher updated successfully!")}catch{g.error("Failed to update teacher. Please try again.")}},t=async()=>{try{await k.mutateAsync(A.id),$(!1),p(null),g.success("Teacher deleted successfully!")}catch{g.error("Failed to delete teacher. Please try again.")}},T=()=>{if(!P)return;const r=`Teacher Login Credentials
Name: ${P.fullName}
Employee ID: ${P.employeeId}
Email: ${P.email}
Username: ${P.username}
Password: ${P.password}

Please keep these credentials secure and share them with the teacher.`;navigator.clipboard.writeText(r).then(()=>{g.success("Credentials copied to clipboard!")}).catch(()=>{g.error("Failed to copy credentials")})},z=()=>{if(!P)return;const r=window.open("","_blank");r.document.write(`
      <html>
        <head>
          <title>Teacher Login Credentials</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            .header { text-align: center; margin-bottom: 30px; }
            .credentials { border: 2px solid #333; padding: 20px; margin: 20px 0; }
            .field { margin: 10px 0; }
            .label { font-weight: bold; }
            .value { margin-left: 10px; }
          </style>
        </head>
        <body>
          <div class="header">
            <h2>Teacher Login Credentials</h2>
            <p>Generated on: ${new Date().toLocaleDateString()}</p>
          </div>
          <div class="credentials">
            <div class="field"><span class="label">Name:</span><span class="value">${P.fullName}</span></div>
            <div class="field"><span class="label">Employee ID:</span><span class="value">${P.employeeId}</span></div>
            <div class="field"><span class="label">Email:</span><span class="value">${P.email}</span></div>
            <div class="field"><span class="label">Username:</span><span class="value">${P.username}</span></div>
            <div class="field"><span class="label">Password:</span><span class="value">${P.password}</span></div>
          </div>
          <p><strong>Note:</strong> Please keep these credentials secure and ask the teacher to change the password after first login.</p>
        </body>
      </html>
    `),r.document.close(),r.print()};return l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>s("/admin"),className:"lg:hidden",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Teachers"})]}),e.jsxs(i,{onClick:()=>{S({user:{username:"",email:"",full_name:"",phone:"",password:K()},employee_id:n(),qualification:"",experience_years:0,salary:0}),U(!0)},size:"sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Teacher"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, ID, or qualification...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ee,onChange:r=>le(r.target.value)})]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsx("input",{type:"text",placeholder:"Filter by qualification",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:se,onChange:r=>u(r.target.value)})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:H,onChange:r=>ae(r.target.value),children:[e.jsx("option",{value:"",children:"All Experience"}),e.jsx("option",{value:"0-2",children:"0-2 years"}),e.jsx("option",{value:"3-5",children:"3-5 years"}),e.jsx("option",{value:"6-10",children:"6-10 years"}),e.jsx("option",{value:"10+",children:"10+ years"})]})}),e.jsx("div",{className:"w-full lg:w-48",children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h,onChange:r=>c(r.target.value),children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"employee_id",children:"Sort by ID"}),e.jsx("option",{value:"experience",children:"Sort by Experience"}),e.jsx("option",{value:"qualification",children:"Sort by Qualification"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",o.length," of ",a?.length||0," teachers"]}),(ee||se||H||h!=="name")&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{le(""),u(""),ae(""),c("name")},children:"Clear Filters"})]})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:o?.map(r=>e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center flex-shrink-0",children:r.user?.photo_path?e.jsx("img",{src:`/uploads/${r.user.photo_path}`,alt:`${r.user?.full_name||"Teacher"} profile`,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-600 font-medium",children:(r.user?.full_name||"T").charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:r.user?.full_name||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",r.employee_id]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>de(r),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>qe(r),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Reset Password",children:e.jsx(Ie,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-2",children:[e.jsxs("p",{children:["Email: ",r.user?.email||"N/A"]}),e.jsxs("p",{children:["Phone: ",r.user?.phone||"N/A"]}),e.jsxs("p",{children:["Qualification: ",r.qualification||"N/A"]}),e.jsxs("p",{children:["Experience: ",r.experience_years," years"]})]})]})]})},r.id))}),e.jsx(b,{className:"hidden sm:block",children:e.jsx(b.Content,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(x,{children:[e.jsx(x.Header,{children:e.jsxs(x.Row,{children:[e.jsx(x.Head,{children:"Photo"}),e.jsx(x.Head,{children:"Employee ID"}),e.jsx(x.Head,{children:"Full Name"}),e.jsx(x.Head,{className:"hidden md:table-cell",children:"Email"}),e.jsx(x.Head,{className:"hidden lg:table-cell",children:"Phone"}),e.jsx(x.Head,{className:"hidden lg:table-cell",children:"Qualification"}),e.jsx(x.Head,{children:"Experience"}),e.jsx(x.Head,{children:"Salary"}),e.jsx(x.Head,{children:"Actions"})]})}),e.jsx(x.Body,{children:o?.map(r=>e.jsxs(x.Row,{children:[e.jsx(x.Cell,{children:e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:r.user?.photo_path?e.jsx("img",{src:`/uploads/${r.user.photo_path}`,alt:`${r.user?.full_name||"Teacher"} profile`,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-600 font-medium text-sm",children:(r.user?.full_name||"T").charAt(0).toUpperCase()})})}),e.jsx(x.Cell,{children:r.employee_id}),e.jsx(x.Cell,{children:r.user?.full_name||"N/A"}),e.jsx(x.Cell,{className:"hidden md:table-cell",children:r.user?.email||"N/A"}),e.jsx(x.Cell,{className:"hidden lg:table-cell",children:r.user?.phone||"N/A"}),e.jsx(x.Cell,{className:"hidden lg:table-cell",children:r.qualification||"N/A"}),e.jsxs(x.Cell,{children:[r.experience_years," years"]}),e.jsx(x.Cell,{children:r.salary||0}),e.jsx(x.Cell,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>de(r),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>be(r),children:"Edit"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>qe(r),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Reset Password",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>ke(r),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Delete"})]})})]},r.id))})]})})})}),e.jsx(J,{isOpen:G,onClose:()=>U(!1),title:"Add New Teacher",className:"sm:max-w-md",children:e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsx(C,{label:"Full Name",type:"text",placeholder:"Enter teacher's full name",value:N.user.full_name,onChange:r=>{const X=r.target.value;S(V=>({...V,user:{...V.user,full_name:X}})),X&&X.trim().length>1&&setTimeout(()=>{try{const V=ce(X);V&&S(re=>({...re,user:{...re.user,username:V}}))}catch{}},300)},required:!0}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{label:"Username",type:"text",value:N.user.username,onChange:r=>S({...N,user:{...N.user,username:r.target.value}}),required:!0,className:"flex-1",placeholder:"Auto-generated from full name"}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>{const r=ce(N.user.full_name);S({...N,user:{...N.user,username:r}})},className:"mt-6 px-3",disabled:!N.user.full_name,title:"Generate unique username from full name",children:N.user.full_name?"Auto":"Name?"})]})}),e.jsx(C,{label:"Email",type:"email",value:N.user.email,onChange:r=>S({...N,user:{...N.user,email:r.target.value}}),required:!0}),e.jsx(C,{label:"Phone",type:"tel",placeholder:"Enter phone number",value:N.user.phone,onChange:r=>S({...N,user:{...N.user,phone:r.target.value}})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{label:"Password",type:"password",value:N.user.password,onChange:r=>S({...N,user:{...N.user,password:r.target.value}}),required:!0,placeholder:"Enter password or generate one"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>S({...N,user:{...N.user,password:K()}}),className:"text-xs",children:"Generate Secure Password"}),N.user.password&&e.jsx(i,{type:"button",variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(N.user.password),g.success("Password copied!")},className:"text-xs",children:"Copy Password"})]}),N.user.password&&e.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded border",children:[e.jsx("strong",{children:"Password:"})," ",N.user.password]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{label:"Employee ID",type:"text",value:N.employee_id,onChange:r=>S({...N,employee_id:r.target.value}),required:!0,placeholder:"e.g., T001, T002 (auto-generated)"}),!/^T\d{3,}$/.test(N.employee_id)&&N.employee_id&&e.jsx("div",{className:"text-xs text-orange-600",children:"Employee ID format: T + 3-digit number (e.g., T001, T002)"}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>S({...N,employee_id:n()}),className:"text-xs",children:"Generate next employee ID"})]}),e.jsx(C,{label:"Qualification",type:"text",placeholder:"e.g., M.Sc Mathematics, B.Ed",value:N.qualification,onChange:r=>S({...N,qualification:r.target.value})}),e.jsx(C,{label:"Experience (years)",type:"number",value:N.experience_years,onChange:r=>S({...N,experience_years:parseInt(r.target.value)||0})}),e.jsx(C,{label:"Salary",type:"number",value:N.salary,onChange:r=>S({...N,salary:parseFloat(r.target.value)||0})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:_.isPending,children:"Create Teacher"})]})]})}),e.jsx(J,{isOpen:W,onClose:()=>Z(!1),title:"Teacher Details",className:"sm:max-w-2xl",children:A?e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 -m-6 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold",children:A.user?.full_name?.charAt(0)?.toUpperCase()||"T"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:A.user?.full_name||"N/A"}),e.jsxs("p",{className:"text-blue-100",children:["Employee ID: ",A.employee_id]}),e.jsx("p",{className:"text-blue-100",children:A.qualification||"No qualification specified"})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Username:"}),e.jsx("span",{className:"text-gray-900",children:A.user?.username||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-gray-900",children:A.user?.email||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Phone:"}),e.jsx("span",{className:"text-gray-900",children:A.user?.phone||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A.user?.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.user?.is_active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Professional Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Experience:"}),e.jsxs("span",{className:"text-gray-900",children:[A.experience_years||0," years"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Salary:"}),e.jsxs("span",{className:"text-gray-900",children:["$",A.salary||0]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Joining Date:"}),e.jsx("span",{className:"text-gray-900",children:A.joining_date?new Date(A.joining_date).toLocaleDateString():"N/A"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx(i,{variant:"outline",onClick:()=>Z(!1),children:"Close"}),e.jsx(i,{onClick:()=>{Z(!1),be(A)},children:"Edit Teacher"})]})]}):e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}),e.jsx(J,{isOpen:O,onClose:()=>q(!1),title:"Edit Teacher",className:"sm:max-w-md",children:e.jsxs("form",{onSubmit:De,className:"space-y-4",children:[e.jsx(C,{label:"Full Name",type:"text",value:F.user.full_name,onChange:r=>ie({...F,user:{...F.user,full_name:r.target.value}}),required:!0}),e.jsx(C,{label:"Username",type:"text",value:F.user.username,onChange:r=>ie({...F,user:{...F.user,username:r.target.value}}),required:!0}),e.jsx(C,{label:"Email",type:"email",value:F.user.email,onChange:r=>ie({...F,user:{...F.user,email:r.target.value}}),required:!0}),e.jsx(C,{label:"Phone",type:"tel",value:F.user.phone,onChange:r=>ie({...F,user:{...F.user,phone:r.target.value}})}),e.jsx(C,{label:"Qualification",type:"text",value:F.qualification,onChange:r=>ie({...F,qualification:r.target.value})}),e.jsx(C,{label:"Experience (years)",type:"number",value:F.experience_years,onChange:r=>ie({...F,experience_years:parseInt(r.target.value)||0})}),e.jsx(C,{label:"Salary",type:"number",value:F.salary,onChange:r=>ie({...F,salary:parseFloat(r.target.value)||0})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:f.isPending,children:"Update Teacher"})]})]})}),e.jsx(J,{isOpen:Q,onClose:()=>$(!1),title:"Confirm Delete",className:"sm:max-w-md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Teacher"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete ",e.jsx("strong",{children:A?.user?.full_name}),"? This action cannot be undone."]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(i,{onClick:t,loading:k.isPending,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Teacher"})]})]})}),e.jsx(J,{isOpen:E,onClose:()=>{R(!1),p(null)},title:"Reset Teacher Password",className:"sm:max-w-md",children:A&&e.jsxs("div",{className:"space-y-4 p-2 sm:p-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ye,{className:"h-5 w-5 text-orange-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-orange-900",children:"Reset Password"})})]}),e.jsxs("p",{className:"text-orange-800 text-sm",children:["Are you sure you want to reset the password for ",e.jsx("strong",{children:A.user?.full_name}),"?"]}),e.jsxs("div",{className:"mt-3 text-orange-800 text-sm",children:[e.jsx("p",{children:e.jsx("strong",{children:"What will happen:"})}),e.jsxs("ul",{className:"ml-4 list-disc mt-1",children:[e.jsx("li",{children:"A new secure password will be generated"}),e.jsx("li",{children:"The teacher's current password will be invalidated"}),e.jsx("li",{children:"New credentials will be displayed for sharing"}),e.jsx("li",{children:"Teacher must use the new password for login"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Teacher Details:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",A.user?.full_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Username:"})," ",A.user?.username]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Employee ID:"})," ",A.employee_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",A.user?.email]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>{R(!1),p(null)},disabled:D.isPending,children:"Cancel"}),e.jsx(i,{onClick:_e,loading:D.isPending,className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Reset Password"})]})]})}),e.jsx(J,{isOpen:d,onClose:()=>{M(!1),w(null)},title:"Teacher Account Created Successfully!",className:"sm:max-w-lg",children:P&&e.jsxs("div",{className:"space-y-6 p-2 sm:p-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Pe,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-green-900",children:"Account Created"})]}),e.jsx("p",{className:"text-green-800 text-sm",children:"Teacher account has been created successfully. Please share these login credentials with the teacher."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Login Credentials"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Teacher Name:"}),e.jsx("span",{className:"text-gray-900",children:P.fullName})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Employee ID:"}),e.jsx("span",{className:"text-gray-900",children:P.employeeId})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Username:"}),e.jsx("span",{className:"text-gray-900 font-mono",children:P.username})]}),e.jsxs("div",{className:"flex justify-between items-center bg-yellow-50 p-2 rounded border",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Password:"}),e.jsx("span",{className:"text-gray-900 font-mono",children:P.password})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsxs(i,{variant:"outline",onClick:T,className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),"Copy Credentials"]}),e.jsxs(i,{variant:"outline",onClick:z,className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Print Credentials"]}),e.jsx(i,{onClick:()=>{M(!1),w(null),g.success("Teacher account ready for use!")},children:"Done"})]})]})})]})},Na=()=>{const s=Ne(),{data:a,isLoading:l}=Te(),{data:m}=Qe(),_=ps(),f=ks(),k=qs(),[D,G]=j.useState(!1),[U,W]=j.useState(!1),[Z,O]=j.useState(!1),[q,Q]=j.useState(!1),[$,E]=j.useState(null),[R,d]=j.useState({name:"",grade:6,section:"",academic_year:"2024-2025",capacity:30}),M=(n,I)=>I?`Grade ${n} - ${I}`:`Grade ${n}`,A=n=>{const I={...R,...n};if(n.grade!==void 0||n.section!==void 0){const de=M(I.grade,I.section),be=M(R.grade,R.section);(I.name===""||I.name===be)&&(I.name=de)}d(I)},[p,P]=j.useState(null),[w,ee]=j.useState(""),[le,se]=j.useState(""),[u,H]=j.useState(""),[ae,h]=j.useState("name");j.useEffect(()=>{d(n=>({...n,name:M(n.grade,n.section)}))},[]);const c=a?.filter(n=>{const I=!w||n.name?.toLowerCase().includes(w.toLowerCase())||n.section?.toLowerCase().includes(w.toLowerCase()),de=!le||n.grade?.toString()===le,be=!u||n.academic_year===u;return I&&de&&be})?.sort((n,I)=>{switch(ae){case"name":return n.name?.localeCompare(I.name)||0;case"grade":return(n.grade||0)-(I.grade||0);case"capacity":return(n.capacity||0)-(I.capacity||0);case"year":return(n.academic_year||"").localeCompare(I.academic_year||"");default:return 0}})||[],N=[...new Set(a?.map(n=>n.grade?.toString()).filter(Boolean))],S=[...new Set(a?.map(n=>n.academic_year).filter(Boolean))],F=n=>m?.filter(I=>I.class_id===n)||[],ie=async n=>{n.preventDefault();try{const I={name:R.name,grade:R.grade,section:R.section,academic_year:R.academic_year,capacity:R.capacity};await _.mutateAsync(I),G(!1),d({name:"",grade:6,section:"",academic_year:"2024-2025",capacity:30}),g.success("Class created successfully!")}catch{g.error("Failed to create class. Please try again.")}},je=n=>{E(n),W(!0)},fe=n=>{P({name:n.name||"",grade:n.grade,section:n.section||"",academic_year:n.academic_year||"2024-2025",capacity:n.capacity}),E(n),O(!0)},o=n=>{E(n),Q(!0)},K=async()=>{try{await k.mutateAsync($.id),Q(!1),E(null),g.success("Class deleted successfully!")}catch(n){n.response?.data?.detail?g.error(n.response.data.detail):n.message?g.error(`Failed to delete class: ${n.message}`):g.error("Failed to delete class")}},ce=async n=>{n.preventDefault();try{const I={name:p.name,grade:parseInt(p.grade)||6,section:p.section,academic_year:p.academic_year,capacity:parseInt(p.capacity)||30};await f.mutateAsync({id:$.id,...I}),O(!1),P(null),E(null),g.success("Class updated successfully!")}catch{g.error("Failed to update class. Please try again.")}};return l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>s("/admin"),className:"lg:hidden",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Classes"})]}),e.jsxs(i,{onClick:()=>G(!0),size:"sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Class"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsx(b,{className:"mb-6",children:e.jsxs(b.Content,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search classes...",value:w,onChange:n=>ee(n.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:le,onChange:n=>se(n.target.value),children:[e.jsx("option",{value:"",children:"All Grades"}),N.map(n=>e.jsxs("option",{value:n,children:["Grade ",n]},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:n=>H(n.target.value),children:[e.jsx("option",{value:"",children:"All Years"}),S.map(n=>e.jsx("option",{value:n,children:n},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ae,onChange:n=>h(n.target.value),children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"grade",children:"Sort by Grade"}),e.jsx("option",{value:"capacity",children:"Sort by Capacity"}),e.jsx("option",{value:"year",children:"Sort by Year"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",c.length," of ",a?.length||0," classes"]}),(w||le||u||ae!=="name")&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{ee(""),se(""),H(""),h("name")},children:"Clear Filters"})]})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:c&&c.length>0?c.map(n=>{const I=F(n.id);return e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Grade ",n.grade," - ",n.section]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>je(n),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>fe(n),children:"Edit"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>o(n),children:"Delete"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:["Academic Year: ",n.academic_year||"N/A"]}),e.jsxs("p",{children:["Capacity: ",n.capacity," students"]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Subjects:"}),e.jsx("p",{className:"text-xs",children:I.length>0?I.map(de=>de.name).join(", "):"No subjects assigned"})]})]})]})},n.id)}):e.jsx(b,{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No classes found matching your filters."})})}),e.jsx(b,{className:"hidden sm:block",children:e.jsx(b.Content,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(x,{children:[e.jsx(x.Header,{children:e.jsxs(x.Row,{children:[e.jsx(x.Head,{children:"Class Name"}),e.jsx(x.Head,{children:"Grade"}),e.jsx(x.Head,{className:"hidden md:table-cell",children:"Section"}),e.jsx(x.Head,{className:"hidden lg:table-cell",children:"Academic Year"}),e.jsx(x.Head,{children:"Capacity"}),e.jsx(x.Head,{className:"hidden xl:table-cell",children:"Subjects"}),e.jsx(x.Head,{children:"Actions"})]})}),e.jsx(x.Body,{children:c&&c.length>0?c.map(n=>{const I=F(n.id);return e.jsxs(x.Row,{children:[e.jsx(x.Cell,{children:n.name}),e.jsx(x.Cell,{children:n.grade}),e.jsx(x.Cell,{className:"hidden md:table-cell",children:n.section||"N/A"}),e.jsx(x.Cell,{className:"hidden lg:table-cell",children:n.academic_year||"N/A"}),e.jsx(x.Cell,{children:n.capacity}),e.jsx(x.Cell,{className:"hidden xl:table-cell",children:e.jsx("div",{className:"max-w-xs truncate",title:I.map(de=>de.name).join(", "),children:I.length>0?I.map(de=>de.name).join(", "):"No subjects"})}),e.jsx(x.Cell,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>je(n),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>fe(n),children:"Edit"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>o(n),children:"Delete"})]})})]},n.id)}):e.jsx(x.Row,{children:e.jsx(x.Cell,{colSpan:7,className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No classes found matching your filters."})})})})]})})})}),e.jsx(J,{isOpen:D,onClose:()=>G(!1),title:"Add New Class",className:"sm:max-w-md",children:e.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[e.jsx(C,{label:"Class Name",value:R.name,onChange:n=>d({...R,name:n.target.value}),placeholder:"e.g., Grade 6 - A",required:!0}),e.jsx(me,{label:"Grade",value:R.grade,onChange:n=>A({grade:parseInt(n.target.value)}),options:[{value:6,label:"Grade 6"},{value:7,label:"Grade 7"},{value:8,label:"Grade 8"},{value:9,label:"Grade 9"},{value:10,label:"Grade 10"},{value:11,label:"Grade 11"},{value:12,label:"Grade 12"}],required:!0}),e.jsx(C,{label:"Section",value:R.section,onChange:n=>A({section:n.target.value}),placeholder:"e.g., A, B, C (optional)"}),e.jsx(me,{label:"Academic Year",value:R.academic_year,onChange:n=>d({...R,academic_year:n.target.value}),options:[{value:"2024-2025",label:"2024-2025"},{value:"2025-2026",label:"2025-2026"},{value:"2026-2027",label:"2026-2027"},{value:"2027-2028",label:"2027-2028"},{value:"2028-2029",label:"2028-2029"},{value:"2029-2030",label:"2029-2030"}]}),e.jsx(C,{label:"Capacity",type:"number",value:R.capacity,onChange:n=>d({...R,capacity:parseInt(n.target.value)||30}),required:!0}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>G(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:_.isPending,children:"Create Class"})]})]})}),e.jsx(J,{isOpen:U,onClose:()=>W(!1),title:"Class Details",className:"sm:max-w-lg",children:$?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Class Name: "}),e.jsx("span",{className:"text-gray-900",children:$.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Grade: "}),e.jsx("span",{className:"text-gray-900",children:$.grade})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Section: "}),e.jsx("span",{className:"text-gray-900",children:$.section||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Academic Year: "}),e.jsx("span",{className:"text-gray-900",children:$.academic_year||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Capacity: "}),e.jsxs("span",{className:"text-gray-900",children:[$.capacity," students"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Subjects: "}),e.jsx("span",{className:"text-gray-900",children:F($.id).length>0?F($.id).map(n=>n.name).join(", "):"No subjects assigned"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})})]}):e.jsx("div",{children:"Loading..."})}),e.jsx(J,{isOpen:Z,onClose:()=>O(!1),title:"Edit Class",className:"sm:max-w-md",children:p&&e.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[e.jsx(C,{label:"Class Name",value:p.name,onChange:n=>P({...p,name:n.target.value}),placeholder:"e.g., Grade 6 - A",required:!0}),e.jsx(me,{label:"Grade",value:p.grade,onChange:n=>P({...p,grade:parseInt(n.target.value)}),options:[{value:6,label:"Grade 6"},{value:7,label:"Grade 7"},{value:8,label:"Grade 8"},{value:9,label:"Grade 9"},{value:10,label:"Grade 10"},{value:11,label:"Grade 11"},{value:12,label:"Grade 12"}],required:!0}),e.jsx(C,{label:"Section",value:p.section,onChange:n=>P({...p,section:n.target.value}),placeholder:"e.g., A, B, C (optional)"}),e.jsx(me,{label:"Academic Year",value:p.academic_year,onChange:n=>P({...p,academic_year:n.target.value}),options:[{value:"2024-2025",label:"2024-2025"},{value:"2025-2026",label:"2025-2026"},{value:"2026-2027",label:"2026-2027"},{value:"2027-2028",label:"2027-2028"},{value:"2028-2029",label:"2028-2029"},{value:"2029-2030",label:"2029-2030"}]}),e.jsx(C,{label:"Capacity",type:"number",value:p.capacity,onChange:n=>P({...p,capacity:parseInt(n.target.value)||30}),required:!0}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:f.isPending,children:"Update Class"})]})]})}),e.jsx(J,{isOpen:q,onClose:()=>Q(!1),title:"Delete Class",className:"sm:max-w-md",children:$&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to delete the class ",e.jsxs("strong",{children:['"',$.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-red-600",children:"This action cannot be undone. All associated data will be permanently removed."}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),e.jsx(i,{onClick:K,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Class"})]})]})})]})},wa=()=>{const s=Ne(),{data:a,isLoading:l}=Qe(),{data:m}=Te(),_=gs(),f=Ps(),k=Es(),[D,G]=j.useState(!1),[U,W]=j.useState(!1),[Z,O]=j.useState(!1),[q,Q]=j.useState(null),[$,E]=j.useState(""),[R,d]=j.useState(""),[M,A]=j.useState({name:"",code:"",credits:"",class_id:""}),[p,P]=j.useState({name:"",code:"",credits:"",class_id:""}),w=(a||[]).filter(h=>{const c=!$||h.name?.toLowerCase().includes($.toLowerCase())||h.code?.toLowerCase().includes($.toLowerCase()),N=!R||h.class_id?.toString()===R;return c&&N}).sort((h,c)=>h.name?.localeCompare(c.name)||0),ee=async h=>{h.preventDefault();try{const c={...M,credits:M.credits?parseInt(M.credits):void 0,class_id:parseInt(M.class_id)||null};await _.mutateAsync(c),g.success("Subject created successfully!"),G(!1),A({name:"",code:"",credits:"",class_id:""})}catch(c){g.error("Failed to create subject. Please try again."),oe.error("Create subject error:",c)}},le=async h=>{h.preventDefault();try{const c={...p,credits:p.credits?parseInt(p.credits):void 0,class_id:parseInt(p.class_id)||null};await f.mutateAsync({id:q.id,...c}),g.success("Subject updated successfully!"),W(!1),Q(null)}catch(c){g.error("Failed to update subject. Please try again."),oe.error("Update subject error:",c)}},se=h=>{Q(h),P({name:h.name||"",code:h.code||"",credits:h.credits||"",class_id:h.class_id?.toString()||""}),W(!0)},u=h=>{Q(h),O(!0)},H=async()=>{if(q)try{await k.mutateAsync(q.id),g.success("Subject deleted successfully!"),O(!1),Q(null)}catch(h){g.error("Failed to delete subject. Please try again."),oe.error("Delete subject error:",h)}},ae=h=>m?.find(N=>N.id===h)?.name||`Class ${h}`;return l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>s("/admin-dashboard"),className:"lg:hidden",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Subject Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage subjects and assign teachers"})]})]}),e.jsxs(i,{onClick:()=>G(!0),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Add Subject"]})]}),e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by subject name or code...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:$,onChange:h=>E(h.target.value)})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:R,onChange:h=>d(h.target.value),children:[e.jsx("option",{value:"",children:"All Classes"}),m?.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",w.length," of ",a?.length||0," subjects"]}),($||R)&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{E(""),d("")},children:"Clear Filters"})]})]})}),e.jsx(b,{children:e.jsx(b.Content,{className:"p-0",children:w?.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(x,{children:[e.jsx(x.Header,{children:e.jsxs(x.Row,{children:[e.jsx(x.Head,{children:"Subject Name"}),e.jsx(x.Head,{children:"Code"}),e.jsx(x.Head,{children:"Credits"}),e.jsx(x.Head,{children:"Class"}),e.jsx(x.Head,{children:"Actions"})]})}),e.jsx(x.Body,{children:w.map(h=>e.jsxs(x.Row,{children:[e.jsx(x.Cell,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:h.name})]})}),e.jsx(x.Cell,{children:h.code}),e.jsx(x.Cell,{children:h.credits||"-"}),e.jsx(x.Cell,{children:ae(h.class_id)}),e.jsx(x.Cell,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>se(h),children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>u(h),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ze,{className:"h-4 w-4"})})]})})]},h.id))})]})}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No subjects found matching your filters."})})})}),e.jsx(J,{isOpen:D,onClose:()=>G(!1),title:"Add New Subject",className:"sm:max-w-lg",children:e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[e.jsx(C,{label:"Subject Name",value:M.name,onChange:h=>A({...M,name:h.target.value}),required:!0}),e.jsx(C,{label:"Subject Code (Auto-generated if empty)",value:M.code,onChange:h=>A({...M,code:h.target.value}),placeholder:"Leave empty for auto-generation"}),e.jsx(C,{label:"Credits (Optional)",type:"number",min:"1",max:"10",value:M.credits,onChange:h=>A({...M,credits:h.target.value}),placeholder:"Default: 3"}),e.jsx(me,{label:"Class",value:M.class_id,onChange:h=>A({...M,class_id:h.target.value}),options:[{value:"",label:"Select class"},...m?.map(h=>({value:h.id,label:h.name}))||[]],required:!0}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>G(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:_.isPending,children:"Add Subject"})]})]})}),e.jsx(J,{isOpen:U,onClose:()=>W(!1),title:"Edit Subject",className:"sm:max-w-lg",children:e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsx(C,{label:"Subject Name",value:p.name,onChange:h=>P({...p,name:h.target.value}),required:!0}),e.jsx(C,{label:"Subject Code",value:p.code,onChange:h=>P({...p,code:h.target.value}),required:!0}),e.jsx(C,{label:"Credits (Optional)",type:"number",min:"1",max:"10",value:p.credits,onChange:h=>P({...p,credits:h.target.value}),placeholder:"Default: 3"}),e.jsx(me,{label:"Class",value:p.class_id,onChange:h=>P({...p,class_id:h.target.value}),options:[{value:"",label:"Select class"},...m?.map(h=>({value:h.id,label:h.name}))||[]],required:!0}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>W(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:f.isPending,children:"Update Subject"})]})]})}),e.jsx(J,{isOpen:Z,onClose:()=>O(!1),title:"Delete Subject",className:"sm:max-w-md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(ze,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete ",e.jsx("strong",{children:q?.name}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(i,{type:"button",onClick:H,loading:k.isPending,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Subject"})]})]})})]})},Ca=()=>{const s=Ne(),{data:a,isLoading:l}=ms(),m=ys(),_=js(),f=fs(),[k,D]=j.useState(!1),[G,U]=j.useState(!1),[W,Z]=j.useState(!1),[O,q]=j.useState(!1),[Q,$]=j.useState(null),[E,R]=j.useState({title:"",content:"",target_role:"",is_urgent:!1,show_on_landing:!1,expires_at:""}),[d,M]=j.useState(null),[A,p]=j.useState(""),[P,w]=j.useState(""),[ee,le]=j.useState(""),[se,u]=j.useState(""),[H,ae]=j.useState("created_at"),h=a?.filter(o=>{const K=!A||o.title?.toLowerCase().includes(A.toLowerCase())||o.content?.toLowerCase().includes(A.toLowerCase()),ce=!P||o.target_role===P,n=ee===""||ee==="urgent"&&o.is_urgent||ee==="normal"&&!o.is_urgent,I=se===""||se==="landing"&&o.show_on_landing||se==="non-landing"&&!o.show_on_landing;return K&&ce&&n&&I})?.sort((o,K)=>{switch(H){case"title":return o.title?.localeCompare(K.title)||0;case"created_at":return new Date(K.created_at||0)-new Date(o.created_at||0);case"expires_at":return new Date(o.expires_at||"9999-12-31")-new Date(K.expires_at||"9999-12-31");case"urgent":return(K.is_urgent?1:0)-(o.is_urgent?1:0);default:return 0}})||[];[...new Set(a?.map(o=>o.target_role).filter(Boolean))];const c=async o=>{if(o.preventDefault(),!E.title||!E.content){g.error("Please fill in all required fields (Title and Content)");return}if(E.content.length<10){g.error("Content must be at least 10 characters long");return}try{const K={title:E.title.trim(),content:E.content.trim(),is_urgent:E.is_urgent,show_on_landing:E.show_on_landing,expires_at:E.expires_at||null};E.target_role&&E.target_role!==""&&(K.target_role=E.target_role),await m.mutateAsync(K),D(!1),R({title:"",content:"",target_role:"",is_urgent:!1,show_on_landing:!1,expires_at:""}),g.success("Notice created successfully!")}catch(K){let ce="Failed to create notice. Please try again.";K.response?.data?.detail?Array.isArray(K.response.data.detail)?ce=K.response.data.detail.map(n=>n.msg||n.message).join(", "):ce=K.response.data.detail:K.message&&(ce=K.message),g.error(ce)}},N=o=>{$(o),U(!0)},S=o=>{M({...o,expires_at:o.expires_at?o.expires_at.split("T")[0]+"T"+o.expires_at.split("T")[1].slice(0,5):""}),$(o),Z(!0)},F=o=>{$(o),q(!0)},ie=async()=>{try{await f.mutateAsync(Q.id),q(!1),$(null),g.success("Notice deleted successfully!")}catch(o){let K="Failed to delete notice. Please try again.";o.response?.data?.detail&&(K=o.response.data.detail),g.error(K)}},je=async o=>{o.preventDefault();try{const K={...d,expires_at:d.expires_at||null};await _.mutateAsync({id:Q.id,...K}),Z(!1),M(null),$(null),g.success("Notice updated successfully!")}catch(K){let ce="Failed to update notice. Please try again.";K.response?.data?.detail&&(Array.isArray(K.response.data.detail)?ce=K.response.data.detail.map(n=>n.msg||n.message).join(", "):ce=K.response.data.detail),g.error(ce)}},fe=async o=>{try{await _.mutateAsync({id:o.id,is_urgent:!o.is_urgent}),g.success(`Notice marked as ${o.is_urgent?"normal":"urgent"}`)}catch{g.error("Failed to update notice status")}};return l?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>s("/admin"),className:"lg:hidden",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Notices"})]}),e.jsxs(i,{onClick:()=>D(!0),size:"sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Notice"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsx(b,{className:"mb-6",children:e.jsxs(b.Content,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search notices...",value:A,onChange:o=>p(o.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Role"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:P,onChange:o=>w(o.target.value),children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"teacher",children:"Teachers"}),e.jsx("option",{value:"admin",children:"Admins"}),e.jsx("option",{value:"parent",children:"Parents"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urgency"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ee,onChange:o=>le(o.target.value),children:[e.jsx("option",{value:"",children:"All Notices"}),e.jsx("option",{value:"urgent",children:"Urgent Only"}),e.jsx("option",{value:"normal",children:"Normal Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Landing Page"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:se,onChange:o=>u(o.target.value),children:[e.jsx("option",{value:"",children:"All Notices"}),e.jsx("option",{value:"landing",children:"Landing Page Only"}),e.jsx("option",{value:"non-landing",children:"Non-Landing Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:H,onChange:o=>ae(o.target.value),children:[e.jsx("option",{value:"created_at",children:"Sort by Date Created"}),e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"expires_at",children:"Sort by Expiry Date"}),e.jsx("option",{value:"urgent",children:"Sort by Urgency"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",a?.length||0," notices"]}),(A||P||ee||se||H!=="created_at")&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{p(""),w(""),le(""),u(""),ae("created_at")},children:"Clear Filters"})]})]})}),e.jsx("div",{className:"space-y-4",children:h&&h.length>0?h.map(o=>e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:o.title}),o.is_urgent&&e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium",children:"Urgent"}),o.show_on_landing&&e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium",children:"Landing Page"})]}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base mb-3",children:o.content})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>N(o),children:e.jsx(ye,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>S(o),children:"Edit"}),e.jsx(i,{size:"sm",variant:o.is_urgent?"default":"outline",onClick:()=>fe(o),children:o.is_urgent?"Remove Urgent":"Mark Urgent"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>F(o),className:"text-red-600 hover:text-red-700",children:"Delete"})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{children:["Target: ",o.target_role||"All Users"]}),e.jsxs("span",{children:["Created: ",new Date(o.created_at).toLocaleDateString()]}),o.expires_at&&e.jsxs("span",{children:["Expires: ",new Date(o.expires_at).toLocaleDateString()]})]})]})},o.id)):e.jsx(b,{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No notices found matching your filters."})})}),e.jsx(J,{isOpen:k,onClose:()=>D(!1),title:"Add New Notice",className:"sm:max-w-lg",children:e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx(C,{label:"Title",value:E.title,onChange:o=>R({...E,title:o.target.value}),required:!0}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),e.jsx("textarea",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",rows:4,value:E.content,onChange:o=>R({...E,content:o.target.value}),required:!0,placeholder:"Enter the notice content..."})]}),e.jsx(me,{label:"Target Audience",value:E.target_role,onChange:o=>R({...E,target_role:o.target.value}),options:[{value:"",label:"All Users"},{value:"student",label:"Students Only"},{value:"teacher",label:"Teachers Only"},{value:"admin",label:"Admins Only"}]}),e.jsx(C,{label:"Expires At (Optional)",type:"datetime-local",value:E.expires_at,onChange:o=>R({...E,expires_at:o.target.value})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"urgent",checked:E.is_urgent,onChange:o=>R({...E,is_urgent:o.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"urgent",className:"text-sm font-medium text-gray-700",children:"Mark as urgent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"show-on-landing",checked:E.show_on_landing,onChange:o=>R({...E,show_on_landing:o.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show-on-landing",className:"text-sm font-medium text-gray-700",children:"Show on landing page"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:m.isPending,children:"Create Notice"})]})]})}),e.jsx(J,{isOpen:G,onClose:()=>U(!1),title:"Notice Details",className:"sm:max-w-lg",children:Q?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Title: "}),e.jsx("span",{className:"text-gray-900",children:Q.title}),Q.is_urgent&&e.jsx("span",{className:"ml-2 bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium",children:"Urgent"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Content: "}),e.jsx("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:e.jsx("span",{className:"text-gray-900",children:Q.content})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Target: "}),e.jsx("span",{className:"text-gray-900",children:Q.target_role||"All Users"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})})]}):e.jsx("div",{children:"Loading..."})}),e.jsx(J,{isOpen:W,onClose:()=>Z(!1),title:"Edit Notice",className:"sm:max-w-lg",children:d&&e.jsxs("form",{onSubmit:je,className:"space-y-4",children:[e.jsx(C,{label:"Title",value:d.title,onChange:o=>M({...d,title:o.target.value}),required:!0}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),e.jsx("textarea",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",rows:4,value:d.content,onChange:o=>M({...d,content:o.target.value}),required:!0,placeholder:"Enter the notice content..."})]}),e.jsx(me,{label:"Target Audience",value:d.target_role,onChange:o=>M({...d,target_role:o.target.value}),options:[{value:"",label:"All Users"},{value:"student",label:"Students Only"},{value:"teacher",label:"Teachers Only"},{value:"admin",label:"Admins Only"}]}),e.jsx(C,{label:"Expires At (Optional)",type:"datetime-local",value:d.expires_at,onChange:o=>M({...d,expires_at:o.target.value})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"edit-urgent",checked:d.is_urgent,onChange:o=>M({...d,is_urgent:o.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit-urgent",className:"text-sm font-medium text-gray-700",children:"Mark as urgent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"edit-show-on-landing",checked:d.show_on_landing||!1,onChange:o=>M({...d,show_on_landing:o.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit-show-on-landing",className:"text-sm font-medium text-gray-700",children:"Show on landing page"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:_.isPending,children:"Update Notice"})]})]})}),e.jsx(J,{isOpen:O,onClose:()=>q(!1),title:"Delete Notice",className:"sm:max-w-md",children:Q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to delete the notice ",e.jsxs("strong",{children:['"',Q.title,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-red-600",children:"This action cannot be undone. The notice will be permanently removed."}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(i,{onClick:ie,loading:f.isPending,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Notice"})]})]})})]})},_a=()=>{const s=Ne(),[a,l]=j.useState(!1),[m,_]=j.useState(!1),[f,k]=j.useState({full_name:"Admin User",username:"admin",email:"admin@example.com",phone:"+1234567890",employee_id:"ADM001",department:"Administration",position:"School Administrator",address:"456 School Street, City, State",date_of_birth:"1985-05-20",emergency_contact:"+1987654321"}),[D,G]=j.useState({current_password:"",new_password:"",confirm_password:""}),[U,W]=j.useState(null),[Z,O]=j.useState(null),q={user:{full_name:"Admin User",username:"admin",email:"admin@example.com",phone:"+1234567890",photo_path:null},employee_id:"ADM001",department:"Administration",position:"School Administrator",address:"456 School Street, City, State",date_of_birth:"1985-05-20",emergency_contact:"+1987654321",joined_date:"2019-01-01",permissions:["manage_students","manage_teachers","manage_classes","manage_notices","system_admin"],last_login:"2025-10-06T10:30:00Z"},Q=async d=>{d.preventDefault();try{l(!1),g.success("Profile updated successfully!")}catch{g.error("Failed to update profile")}},$=async d=>{if(d.preventDefault(),D.new_password!==D.confirm_password){g.error("New passwords do not match");return}try{_(!1),G({current_password:"",new_password:"",confirm_password:""}),g.success("Password changed successfully!")}catch{g.error("Failed to change password")}},E=d=>{const M=d.target.files[0];if(M){if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(M.type)){g.error("Please select a valid image file (JPEG, PNG, or GIF)");return}if(M.size>5*1024*1024){g.error("File size must be less than 5MB");return}W(M);const p=new FileReader;p.onload=P=>O(P.target.result),p.readAsDataURL(M)}},R=async()=>{if(U)try{new FormData().append("file",U),g.success("Photo uploaded successfully!"),W(null),O(null)}catch{g.error("Failed to upload photo")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsx(b.Content,{className:"p-6 sm:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-white/20 backdrop-blur-sm border-4 border-white/30 flex items-center justify-center overflow-hidden shadow-lg",children:Z?e.jsx("img",{src:Z,alt:"Profile preview",className:"w-full h-full object-cover"}):e.jsx(Fe,{className:"h-8 w-8 sm:h-12 sm:w-12 text-white/70"})}),e.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",id:"photo-upload"}),e.jsx("label",{htmlFor:"photo-upload",children:e.jsx(i,{size:"sm",className:"h-8 w-8 p-0 rounded-full bg-white text-blue-600 hover:bg-blue-50 shadow-md",asChild:!0,children:e.jsx("span",{className:"cursor-pointer",children:e.jsx(Fe,{className:"h-4 w-4"})})})}),q.user.photo_path,U&&e.jsxs(e.Fragment,{children:[e.jsx(i,{size:"sm",onClick:R,className:"h-8 w-8 p-0 rounded-full bg-green-500 text-white hover:bg-green-600 shadow-md",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{W(null),O(null)},className:"h-8 w-8 p-0 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-md",children:e.jsx(Ee,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:q.user.full_name}),e.jsx("p",{className:"text-blue-100 mb-1",children:q.position}),e.jsxs("p",{className:"text-blue-100 text-sm",children:[q.department," • Employee ID: ",q.employee_id]}),e.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-start gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2",children:[e.jsx("div",{className:"text-xs text-blue-100",children:"Experience"}),e.jsxs("div",{className:"text-lg font-semibold",children:[q.experience_years," years"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2",children:[e.jsx("div",{className:"text-xs text-blue-100",children:"Join Date"}),e.jsx("div",{className:"text-sm font-semibold",children:new Date(q.joined_date).toLocaleDateString()})]})]})]})]})})}),e.jsx(b,{className:"border-dashed border-2 border-gray-300 bg-gray-50",children:e.jsxs(b.Content,{className:"p-4 text-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:U?"Click the checkmark to upload your photo":"Upload a professional profile photo to personalize your account"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max size: 5MB • Supported formats: JPEG, PNG, GIF"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(b,{children:[e.jsx(b.Header,{className:"pb-3",children:e.jsxs(b.Title,{className:"text-lg flex items-center gap-2",children:[e.jsx(User,{className:"h-5 w-5 text-blue-600"}),"Personal Information"]})}),e.jsxs(b.Content,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.user.full_name})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Username"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.user.username})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.user.email})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Phone"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.user.phone})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Date of Birth"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:new Date(q.date_of_birth).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Emergency Contact"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.emergency_contact})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Address"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.address})]})]})]}),e.jsxs(b,{children:[e.jsx(b.Header,{className:"pb-3",children:e.jsxs(b.Title,{className:"text-lg flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5 text-blue-600"}),"Professional Information"]})}),e.jsx(b.Content,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.employee_id})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Position"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.position})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Department"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:q.department})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Experience"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:[q.experience_years," years"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Joining Date"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:new Date(q.joined_date).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Last Login"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:new Date(q.last_login).toLocaleString()})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsx(b.Header,{className:"pb-3",children:e.jsx(b.Title,{className:"text-base",children:"Quick Actions"})}),e.jsxs(b.Content,{className:"space-y-3",children:[e.jsxs(i,{className:"w-full justify-start",variant:"outline",onClick:()=>l(!0),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),e.jsxs(i,{className:"w-full justify-start",variant:"outline",onClick:()=>_(!0),children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Change Password"]}),e.jsxs(i,{className:"w-full justify-start",variant:"outline",onClick:()=>s("/admin/students"),children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Manage Students"]}),e.jsxs(i,{className:"w-full justify-start",variant:"outline",onClick:()=>s("/admin/teachers"),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Manage Teachers"]})]})]}),e.jsxs(b,{children:[e.jsx(b.Header,{className:"pb-3",children:e.jsx(b.Title,{className:"text-base",children:"Admin Permissions"})}),e.jsx(b.Content,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:q.permissions.map((d,M)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:d.replace(/_/g," ").toLowerCase()},M))})})]}),e.jsxs(b,{children:[e.jsx(b.Header,{className:"pb-3",children:e.jsx(b.Title,{className:"text-base",children:"Account Status"})}),e.jsx(b.Content,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Role"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Administrator"})]})]})})]})]})]}),e.jsx(J,{isOpen:a,onClose:()=>l(!1),title:"Edit Admin Profile",className:"sm:max-w-2xl",children:e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(C,{label:"Full Name",value:f.full_name,onChange:d=>k({...f,full_name:d.target.value}),required:!0}),e.jsx(C,{label:"Username",value:f.username,onChange:d=>k({...f,username:d.target.value}),required:!0}),e.jsx(C,{label:"Email",type:"email",value:f.email,onChange:d=>k({...f,email:d.target.value}),required:!0}),e.jsx(C,{label:"Phone",value:f.phone,onChange:d=>k({...f,phone:d.target.value}),required:!0}),e.jsx(C,{label:"Employee ID",value:f.employee_id,onChange:d=>k({...f,employee_id:d.target.value}),required:!0,readOnly:!0}),e.jsx(C,{label:"Position",value:f.position,onChange:d=>k({...f,position:d.target.value})}),e.jsx(C,{label:"Department",value:f.department,onChange:d=>k({...f,department:d.target.value})}),e.jsx(C,{label:"Date of Birth",type:"date",value:f.date_of_birth,onChange:d=>k({...f,date_of_birth:d.target.value})}),e.jsx(C,{label:"Emergency Contact",value:f.emergency_contact,onChange:d=>k({...f,emergency_contact:d.target.value})})]}),e.jsx(C,{label:"Address",value:f.address,onChange:d=>k({...f,address:d.target.value})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(i,{type:"submit",children:"Update Profile"})]})]})}),e.jsx(J,{isOpen:m,onClose:()=>_(!1),title:"Change Password",className:"sm:max-w-md",children:e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsx(C,{label:"Current Password",type:"password",value:D.current_password,onChange:d=>G({...D,current_password:d.target.value}),required:!0}),e.jsx(C,{label:"New Password",type:"password",value:D.new_password,onChange:d=>G({...D,new_password:d.target.value}),required:!0}),e.jsx(C,{label:"Confirm New Password",type:"password",value:D.confirm_password,onChange:d=>G({...D,confirm_password:d.target.value}),required:!0}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(i,{type:"submit",children:"Change Password"})]})]})})]})},Sa=()=>{const s=Ne(),[a,l]=j.useState(!1),[m,_]=j.useState(null),{data:f=[],isLoading:k}=Ts(),{data:D=[]}=Te(),{data:G=[]}=Qe(),{data:U=[]}=Ke(),W=Ds(),Z=Ms(),[O,q]=j.useState(""),[Q,$]=j.useState(""),[E,R]=j.useState(""),[d,M]=j.useState({day_of_week:"",start_time:"",end_time:"",subject_id:"",class_id:"",teacher_id:"",room_number:""}),A=[{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"}],p=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30"],P=f.filter(u=>{const H=!O||u.subject?.name?.toLowerCase().includes(O.toLowerCase())||u.class_assigned?.name?.toLowerCase().includes(O.toLowerCase())||u.teacher?.user?.full_name?.toLowerCase().includes(O.toLowerCase()),ae=!Q||u.day_of_week===Q,h=!E||u.class_id.toString()===E;return H&&ae&&h}),w=A.reduce((u,H)=>(u[H.value]=P.filter(ae=>ae.day_of_week===H.value).sort((ae,h)=>ae.start_time.localeCompare(h.start_time)),u),{}),ee=async u=>{u.preventDefault();const ae=[{field:"class_id",name:"Class"},{field:"subject_id",name:"Subject"},{field:"teacher_id",name:"Teacher"},{field:"day_of_week",name:"Day of Week"},{field:"start_time",name:"Start Time"},{field:"end_time",name:"End Time"}].filter(({field:h})=>!d[h]);if(ae.length>0){g.error(`Please select: ${ae.map(h=>h.name).join(", ")}`);return}if(d.start_time>=d.end_time){g.error("End time must be after start time");return}try{await W.mutateAsync(d),l(!1),M({day_of_week:"",start_time:"",end_time:"",subject_id:"",class_id:"",teacher_id:"",room_number:""}),g.success("Class schedule created successfully!")}catch(h){g.error(h.response?.data?.detail||"Failed to create schedule")}},le=async u=>{try{await Z.mutateAsync(u),g.success("Schedule deleted successfully!")}catch{g.error("Failed to delete schedule")}},se=(u,H)=>{M({...d,[u]:H})};return k?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>s("/admin"),className:"lg:hidden",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Class Schedule Management"})]}),e.jsxs(i,{onClick:()=>l(!0),size:"sm",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Add Class Schedule"]})]}),e.jsx(b,{className:"mb-6",children:e.jsxs(b.Content,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search subjects, classes, or teachers...",value:O,onChange:u=>q(u.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:Q,onChange:u=>$(u.target.value),children:[e.jsx("option",{value:"",children:"All Days"}),A.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:E,onChange:u=>R(u.target.value),children:[e.jsx("option",{value:"",children:"All Classes"}),D.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]})]}),(O||Q||E)&&e.jsx("div",{className:"flex justify-end",children:e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{q(""),$(""),R("")},children:"Clear Filters"})})]})}),e.jsxs(b,{children:[e.jsx(b.Header,{className:"p-4 sm:p-6",children:e.jsxs(b.Title,{className:"text-lg sm:text-xl flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5"}),"Weekly Class Schedule"]})}),e.jsx(b.Content,{className:"p-0",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-7 divide-y lg:divide-y-0 lg:divide-x",children:A.map(u=>{const H=w[u.value]||[],ae=new Date().toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),h=u.value===ae;return e.jsxs("div",{className:`p-4 ${h?"bg-blue-50":""}`,children:[e.jsx("div",{className:"mb-3",children:e.jsx("h3",{className:`font-semibold ${h?"text-blue-900":"text-gray-900"}`,children:u.label})}),e.jsx("div",{className:"space-y-2",children:H.length>0?H.map(c=>e.jsxs("div",{className:"p-3 rounded-lg border-l-4 border-blue-500 bg-blue-50 relative group",children:[e.jsxs("div",{className:"text-xs font-medium text-blue-600 mb-1",children:[c.start_time," - ",c.end_time]}),e.jsx("div",{className:"font-medium text-sm text-blue-900",children:c.subject?.name}),e.jsxs("div",{className:"text-xs text-blue-700",children:["Class: ",c.class_assigned?.name]}),e.jsxs("div",{className:"text-xs text-blue-700",children:["Teacher: ",c.teacher?.user?.full_name]}),c.room_number&&e.jsxs("div",{className:"text-xs text-blue-600",children:["Room: ",c.room_number]}),e.jsx("button",{onClick:()=>le(c.id),className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 text-red-600 hover:text-red-800 transition-opacity",children:e.jsx(Ee,{className:"h-4 w-4"})})]},c.id)):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(as,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No classes scheduled"})]})})]},u.value)})})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Classes"})]})}),e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:D.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Classes Available"})]})}),e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:G.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Subjects"})]})}),e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:U.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Teachers"})]})})]}),e.jsx(J,{isOpen:a,onClose:()=>l(!1),title:"Add Class Schedule",className:"sm:max-w-lg",children:e.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[e.jsx(me,{label:"Class",value:d.class_id,onChange:u=>se("class_id",u.target.value),options:[{value:"",label:"Select Class"},...D.map(u=>({value:u.id.toString(),label:u.name}))],required:!0}),e.jsx(me,{label:"Subject",value:d.subject_id,onChange:u=>se("subject_id",u.target.value),options:[{value:"",label:"Select Subject"},...G.map(u=>({value:u.id.toString(),label:u.name}))],required:!0}),e.jsx(me,{label:"Teacher",value:d.teacher_id,onChange:u=>se("teacher_id",u.target.value),options:[{value:"",label:"Select Teacher"},...U.map(u=>({value:u.id.toString(),label:u.user?.full_name||`Teacher ${u.id}`}))],required:!0}),e.jsx(me,{label:"Day of Week",value:d.day_of_week,onChange:u=>se("day_of_week",u.target.value),options:[{value:"",label:"Select Day"},...A],required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{label:"Start Time",value:d.start_time,onChange:u=>se("start_time",u.target.value),options:[{value:"",label:"Select Time"},...p.map(u=>({value:u,label:u}))],required:!0}),e.jsx(me,{label:"End Time",value:d.end_time,onChange:u=>se("end_time",u.target.value),options:[{value:"",label:"Select Time"},...p.map(u=>({value:u,label:u}))],required:!0})]}),e.jsx(C,{label:"Room Number (Optional)",value:d.room_number,onChange:u=>se("room_number",u.target.value),placeholder:"e.g., Room 101"}),(d.class_id||d.subject_id||d.teacher_id)&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded border",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Details:"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Class:"})," ",d.class_id?D.find(u=>u.id.toString()===d.class_id)?.name||"Unknown":"Not selected"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Subject:"})," ",d.subject_id?G.find(u=>u.id.toString()===d.subject_id)?.name||"Unknown":"Not selected"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Teacher:"})," ",d.teacher_id?U.find(u=>u.id.toString()===d.teacher_id)?.user?.full_name||"Unknown":"Not selected"]}),d.day_of_week&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Day:"})," ",A.find(u=>u.value===d.day_of_week)?.label||"Unknown"]}),d.start_time&&d.end_time&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Time:"})," ",d.start_time," - ",d.end_time]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-2 space-y-reverse sm:space-y-0 sm:space-x-3",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(i,{type:"submit",loading:W.isPending,children:"Add Schedule"})]})]})})]})};export{Gs as A,i as B,b as C,fa as D,ba as E,ja as F,va as G,Na as H,C as I,wa as J,Ca as K,oe as L,J as M,Sa as N,_a as O,Js as P,na as Q,ia as R,me as S,x as T,ca as U,ha as V,Vs as a,Ys as b,he as c,Ws as d,Xs as e,xa as f,aa as g,ua as h,ma as i,ta as j,la as k,ra as l,Bs as m,da as n,oa as o,Zs as p,ea as q,sa as r,Ge as s,zs as t,Hs as u,ga as v,pa as w,ya as x,We as y,Te as z};
