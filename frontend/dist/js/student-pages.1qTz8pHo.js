import{j as e}from"./query-vendor.8wxMU1ov.js";import{p as u,C as d,T as a,q as b,B as f,c as y,r as v}from"./admin-pages.BUna6bVg.js";import"./router-vendor.hUHkLMlj.js";import{k as n,o as w,X as k,F as N,B as _,D as C,C as g,m as p,p as S}from"./ui-vendor.D9emdPb2.js";import{u as D}from"./teacher-pages.Do1_KYSo.js";function T({studentId:x}){const{data:r=[],isLoading:c,error:i}=u(x),t=s=>({"A+":"bg-green-100 text-green-800",A:"bg-green-100 text-green-800","B+":"bg-blue-100 text-blue-800",B:"bg-blue-100 text-blue-800","C+":"bg-yellow-100 text-yellow-800",C:"bg-yellow-100 text-yellow-800",D:"bg-orange-100 text-orange-800",F:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800";if(c)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(i)return e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:"Failed to load exam results"})});const h=r.length,m=r.reduce((s,o)=>s+o.marks_obtained,0),l=r.reduce((s,o)=>s+o.total_marks,0),j=l>0?Math.round(m/l*100):0;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Exam Results"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx(d,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(n,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:h}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Total Exams"})]})]})}),e.jsx(d,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(w,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:[j,"%"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Average"})]})]})}),e.jsx(d,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(n,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:m}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Total Marks"})]})]})})]}),e.jsxs(d,{children:[e.jsx(d.Header,{children:e.jsxs(d.Title,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5"}),"Detailed Results"]})}),e.jsxs(d.Content,{className:"p-0 overflow-hidden",children:[e.jsx("div",{className:"block lg:hidden",children:e.jsx("div",{className:"space-y-3 p-4",children:r.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-medium text-sm",children:["Exam #",s.exam_id]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Subject #",s.subject_id]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold",children:[s.marks_obtained,"/",s.total_marks]}),s.grade&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t(s.grade)}`,children:s.grade})]})]}),s.remarks&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:s.remarks})]},s.id))})}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(a.Row,{children:[e.jsx(a.Head,{children:"Exam"}),e.jsx(a.Head,{children:"Subject"}),e.jsx(a.Head,{children:"Marks Obtained"}),e.jsx(a.Head,{children:"Total Marks"}),e.jsx(a.Head,{children:"Percentage"}),e.jsx(a.Head,{children:"Grade"}),e.jsx(a.Head,{children:"Remarks"})]})}),e.jsx(a.Body,{children:r.map(s=>e.jsxs(a.Row,{children:[e.jsxs(a.Cell,{children:["Exam #",s.exam_id]}),e.jsxs(a.Cell,{children:["Subject #",s.subject_id]}),e.jsx(a.Cell,{children:e.jsx("span",{className:"font-medium",children:s.marks_obtained})}),e.jsx(a.Cell,{children:s.total_marks}),e.jsx(a.Cell,{children:e.jsxs("span",{className:"font-medium",children:[Math.round(s.marks_obtained/s.total_marks*100),"%"]})}),e.jsx(a.Cell,{children:s.grade&&e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t(s.grade)}`,children:s.grade})}),e.jsx(a.Cell,{children:s.remarks||"No remarks"})]},s.id))})]})})]})]}),r.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No exam results found"})]})]})}function B(){const{user:x,isLoading:r}=D(),c=x?.student_id||x?.studentId,{data:i=[],isLoading:t,error:h}=b(c);if(r)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!c)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center p-6 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("div",{className:"text-red-600 mb-2",children:e.jsx(k,{className:"h-8 w-8 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Student Profile Not Found"}),e.jsx("p",{className:"text-red-700",children:"Unable to load materials. Please contact the administrator to ensure your student profile is properly set up."})]})});const m=l=>{const j=`${y.frontend.baseURL}/uploads/${l.file_path}`;window.open(j,"_blank")};return t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:"Failed to load study materials"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Study Materials"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:i.map(l=>e.jsx(d,{className:"hover:shadow-lg transition-shadow",children:e.jsx(d.Content,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(N,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:l.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2",children:l.description}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:l.file_type}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Subject ",l.subject_id]})]}),e.jsxs(f,{size:"sm",variant:"outline",className:"w-full",onClick:()=>m(l),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Download"]})]}),e.jsxs("div",{className:"flex items-center mt-3 text-xs text-gray-400",children:[e.jsx(g,{className:"h-3 w-3 mr-1"}),"Uploaded: ",new Date(l.created_at).toLocaleDateString()]})]})]})})},l.id))}),i.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No study materials available"})]})]})}function F({studentId:x}){const{data:r=[],isLoading:c,error:i}=v(x);return c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:"Failed to load notices"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Notices"})]}),e.jsx("div",{className:"space-y-4",children:r.map(t=>e.jsx(d,{className:`${t.is_urgent?"border-l-4 border-red-500 shadow-md":""}`,children:e.jsx(d.Content,{className:"p-4 sm:p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(p,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:t.title}),t.is_urgent&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 text-red-600 mr-1"}),e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"Urgent"})]})]}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base mb-4 leading-relaxed",children:t.content}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-xs sm:text-sm text-gray-500 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Posted: ",new Date(t.created_at).toLocaleDateString()]})]}),t.expires_at&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Expires: ",new Date(t.expires_at).toLocaleDateString()]})]})]})]})})})},t.id))}),r.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No notices available"})]})]})}export{B as S,F as a,T as b};
