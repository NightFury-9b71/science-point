import{j as e}from"./query-vendor.8wxMU1ov.js";import{u as W,r as p,c as ne,d as j}from"./router-vendor.hUHkLMlj.js";import{u as J,T as ce,a as ie,b as de,c as oe,d as xe,e as me,f as he}from"./teacher-pages.Do1_KYSo.js";import{w as ue}from"./withAuthGuard.DUcKPOLq.js";import{e as pe,C as a,u as ge,a as je,b as Z,m as fe,A as Ne,B as d,S as O,P as be,Q as ye,R as ve,U as we,c as Se}from"./admin-pages.BUna6bVg.js";import{m as B,p as Ce,C as U,A as K,U as ke,B as ee,k as Pe,V as De,r as Q,o as V,Y as _e,X as L,P as se,D as Me,e as Te,T as Fe,F as X,Z as Ae,_ as Le,i as $,s as Ue,G as Y,$ as H,a0 as Ee,t as R}from"./ui-vendor.D9emdPb2.js";import Ie from"./NotFound.CivlE6fY.js";import"./react-vendor.CdglivQu.js";import"./http-vendor.BNtd7jmy.js";function ze(){const{data:x=[],isLoading:f,error:N}=pe();return f?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):N?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:"Failed to load notices"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Notices"})]}),e.jsx("div",{className:"space-y-4",children:x.map(l=>e.jsx(a,{className:`${l.is_urgent?"border-l-4 border-red-500 shadow-md":""}`,children:e.jsx(a.Content,{className:"p-4 sm:p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(B,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:l.title}),l.is_urgent&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"h-4 w-4 text-red-600 mr-1"}),e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium",children:"Urgent"})]})]}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base mb-4 leading-relaxed",children:l.content}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-xs sm:text-sm text-gray-500 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Posted: ",new Date(l.created_at).toLocaleDateString()]})]}),l.expires_at&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Expires: ",new Date(l.expires_at).toLocaleDateString()]})]})]})]})})})},l.id))}),x.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No notices available"})]})]})}const Ge=()=>{const x=W(),{user:f}=J(),N=f?.teacher_id||f?.teacherId,[l,c]=p.useState(""),[M,k]=p.useState("all"),{data:o=[]}=ge(N),{data:m=[]}=je(N),{data:y=[]}=Z(N),{data:w=[]}=fe(),{data:b=[]}=Ne(),E=p.useMemo(()=>l?m.filter(s=>s.class_id===parseInt(l)):m,[m,l]),i=p.useMemo(()=>{const s=E.map(r=>{const h=y.map(u=>u.id),v=w.filter(u=>u.student_id===r.id&&h.includes(u.exam?.subject_id)),T=v.reduce((u,A)=>u+A.marks_obtained,0),F=v.reduce((u,A)=>u+A.exam?.max_marks||0,0),I=F>0?T/F*100:0,D=b.filter(u=>u.student_id===r.id),C=D.length,_=D.filter(u=>u.status==="present").length,z=C>0?_/C*100:0,q=I*.7+z*.3;return{student:r,averageMarks:Math.round(I*100)/100,attendancePercentage:Math.round(z*100)/100,overallPerformance:Math.round(q*100)/100,totalExams:v.length,presentDays:_,totalDays:C}});s.sort((r,h)=>h.overallPerformance-r.overallPerformance);const g={totalStudents:s.length,averageClassMarks:s.length>0?Math.round(s.reduce((r,h)=>r+h.averageMarks,0)/s.length*100)/100:0,averageClassAttendance:s.length>0?Math.round(s.reduce((r,h)=>r+h.attendancePercentage,0)/s.length*100)/100:0,excellentPerformers:s.filter(r=>r.overallPerformance>=85).length,goodPerformers:s.filter(r=>r.overallPerformance>=70&&r.overallPerformance<85).length,needsImprovement:s.filter(r=>r.overallPerformance<70).length};return{studentPerformance:s,classStats:g}},[E,w,b,o,y]),S=s=>s>=90?{grade:"A+",color:"text-green-600",bgColor:"bg-green-100"}:s>=80?{grade:"A",color:"text-green-600",bgColor:"bg-green-100"}:s>=70?{grade:"B",color:"text-blue-600",bgColor:"bg-blue-100"}:s>=60?{grade:"C",color:"text-yellow-600",bgColor:"bg-yellow-100"}:s>=50?{grade:"D",color:"text-orange-600",bgColor:"bg-orange-100"}:{grade:"F",color:"text-red-600",bgColor:"bg-red-100"},P=s=>s>=85?{status:"Excellent",color:"text-green-600",bgColor:"bg-green-100"}:s>=75?{status:"Good",color:"text-blue-600",bgColor:"bg-blue-100"}:s>=65?{status:"Average",color:"text-yellow-600",bgColor:"bg-yellow-100"}:{status:"Poor",color:"text-red-600",bgColor:"bg-red-100"};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>x("/teacher"),className:"lg:hidden",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Student Performance"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Performance analytics for your classes"})]})]})}),e.jsx(a,{className:"p-6 shadow-lg border-0 bg-gradient-to-r from-white to-gray-50",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(O,{label:"Filter by Class",value:l,onChange:s=>c(s.target.value),options:[{value:"",label:"All My Classes"},...o.map(s=>({value:s.id,label:s.name}))],className:"text-base"}),e.jsx(O,{label:"Time Period",value:M,onChange:s=>k(s.target.value),options:[{value:"all",label:"All Time"},{value:"month",label:"Last Month"},{value:"quarter",label:"Last Quarter"},{value:"year",label:"Last Year"}],className:"text-base"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(a,{className:"p-6 shadow-lg border-0 bg-gradient-to-br from-blue-50 to-blue-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:e.jsx(ke,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:i.classStats.totalStudents})]})]})}),e.jsx(a,{className:"p-6 shadow-lg border-0 bg-gradient-to-br from-green-50 to-green-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:e.jsx(ee,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Avg. Marks"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[i.classStats.averageClassMarks,"%"]})]})]})}),e.jsx(a,{className:"p-6 shadow-lg border-0 bg-gradient-to-br from-purple-50 to-purple-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:e.jsx(U,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Avg. Attendance"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[i.classStats.averageClassAttendance,"%"]})]})]})}),e.jsx(a,{className:"p-6 shadow-lg border-0 bg-gradient-to-br from-yellow-50 to-yellow-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-500 rounded-lg",children:e.jsx(Pe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Top Performers"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:i.classStats.excellentPerformers})]})]})})]}),e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(a.Header,{className:"p-6 bg-gradient-to-r from-indigo-50 to-purple-50 border-b",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(De,{className:"h-6 w-6 text-indigo-600"}),e.jsx(a.Title,{className:"text-lg font-bold text-gray-900",children:"Performance Distribution"})]})}),e.jsx(a.Content,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl font-bold text-green-600",children:i.classStats.excellentPerformers})}),e.jsx("p",{className:"font-semibold text-green-700",children:"Excellent (85%+)"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.classStats.totalStudents>0?Math.round(i.classStats.excellentPerformers/i.classStats.totalStudents*100):0,"% of students"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-blue-100 rounded-full flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:i.classStats.goodPerformers})}),e.jsx("p",{className:"font-semibold text-blue-700",children:"Good (70-84%)"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.classStats.totalStudents>0?Math.round(i.classStats.goodPerformers/i.classStats.totalStudents*100):0,"% of students"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-red-100 rounded-full flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl font-bold text-red-600",children:i.classStats.needsImprovement})}),e.jsx("p",{className:"font-semibold text-red-700",children:"Needs Attention (<70%)"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.classStats.totalStudents>0?Math.round(i.classStats.needsImprovement/i.classStats.totalStudents*100):0,"% of students"]})]})]})})]}),e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(a.Header,{className:"p-6 bg-gradient-to-r from-gray-50 to-gray-100 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{className:"h-6 w-6 text-gray-600"}),e.jsx(a.Title,{className:"text-lg font-bold text-gray-900",children:"Student Performance Details"})]}),l&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Class: ",o.find(s=>s.id===parseInt(l))?.name]})]})}),e.jsx(a.Content,{className:"p-0",children:i.studentPerformance.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marks (%)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendance (%)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overall (%)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.studentPerformance.map((s,g)=>{const r=S(s.overallPerformance),h=P(s.attendancePercentage),v=o.find(T=>T.id===s.student.class_id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${g===0?"bg-yellow-100 text-yellow-800":g===1?"bg-gray-100 text-gray-800":g===2?"bg-orange-100 text-orange-800":"bg-gray-50 text-gray-600"}`,children:g+1})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900",children:s.student.user?.full_name||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.student.roll_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[s.averageMarks,"%"]}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",s.totalExams," exams)"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h.bgColor} ${h.color}`,children:[s.attendancePercentage,"%"]}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",s.presentDays,"/",s.totalDays,")"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"font-bold text-gray-900",children:[s.overallPerformance,"%"]}),s.overallPerformance>=85?e.jsx(V,{className:"ml-2 h-4 w-4 text-green-500"}):s.overallPerformance>=70?e.jsx(V,{className:"ml-2 h-4 w-4 text-blue-500"}):e.jsx(_e,{className:"ml-2 h-4 w-4 text-red-500"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${r.bgColor} ${r.color}`,children:r.grade})})]},s.student.id)})})]})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Q,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Performance Data"}),e.jsx("p",{className:"text-gray-500",children:l?"No students found in the selected class.":"No students available to display performance data."})]})})]})]})},Re=()=>{const x=W(),{user:f,isLoading:N}=J(),l=f?.teacher_id||f?.teacherId,[c,M]=p.useState(null),[k,o]=p.useState(!1),[m,y]=p.useState(null),[w,b]=p.useState(!1),[E,i]=p.useState(!1),[S,P]=p.useState(null),[s,g]=p.useState({title:"",description:"",file:null,is_public:!0}),[r,h]=p.useState({title:"",description:"",is_public:!0});if(N)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!l)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center p-6 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("div",{className:"text-red-600 mb-2",children:e.jsx(L,{className:"h-8 w-8 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Teacher Profile Not Found"}),e.jsx("p",{className:"text-red-700",children:"Unable to load materials. Please contact the administrator to ensure your teacher profile is properly set up."})]})});const{data:v=[],isLoading:T}=Z(l),{data:F=[],isLoading:I}=be(l),D=ye(),C=ve(),_=we(),z=t=>{const n=t.target.files[0];n&&g(G=>({...G,file:n}))},q=async t=>{if(t.preventDefault(),!s.file||!s.title||!c){alert("Please fill in all required fields");return}const n=new FormData;n.append("title",s.title),n.append("description",s.description||""),n.append("subject_id",c.id),n.append("file",s.file),n.append("is_public",s.is_public);try{await D.mutateAsync({formData:n,teacherId:l}),g({title:"",description:"",file:null,is_public:!0}),o(!1)}catch{alert("Failed to upload material. Please try again.")}},u=t=>{y(t),h({title:t.title,description:t.description||"",is_public:t.is_public}),b(!0)},A=async t=>{if(t.preventDefault(),!r.title){alert("Title is required");return}try{await C.mutateAsync({teacherId:l,materialId:m.id,materialData:r}),b(!1),y(null)}catch{alert("Failed to update material. Please try again.")}},te=t=>{P(t),i(!0)},ae=async()=>{try{await _.mutateAsync({teacherId:l,materialId:S.id}),i(!1),P(null)}catch{alert("Failed to delete material. Please try again.")}},le=t=>{const n=`${Se.frontend.baseURL}/uploads/${t.file_path}`;window.open(n,"_blank")},re=t=>t?.includes("pdf")?e.jsx(X,{className:"h-6 w-6 text-red-500"}):t?.includes("image")?e.jsx(Ae,{className:"h-6 w-6 text-green-500"}):e.jsx(Le,{className:"h-6 w-6 text-gray-500"});return T||I?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>x("/teacher"),className:"lg:hidden",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Study Materials"})]}),e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsx(a.Title,{children:"Upload New Material"})}),e.jsx(a.Content,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("select",{value:c?.id||"",onChange:t=>{const n=v.find(G=>G.id===parseInt(t.target.value));M(n)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Subject"}),v.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.code,")"]},t.id))]}),e.jsxs(d,{onClick:()=>o(!0),disabled:!c,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Upload Material"]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:F.map(t=>e.jsx(a,{className:"hover:shadow-lg transition-shadow",children:e.jsx(a.Content,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:re(t.file_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm sm:text-base truncate",children:t.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:t.file_type}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Subject ",t.subject_id]})]}),e.jsxs(d,{size:"sm",variant:"outline",className:"w-full",onClick:()=>le(t),children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsxs(d,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>u(t),children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(d,{size:"sm",variant:"outline",className:"flex-1 text-red-600 hover:text-red-700",onClick:()=>te(t),children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]}),e.jsxs("div",{className:"flex items-center mt-3 text-xs text-gray-400",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"Uploaded: ",new Date(t.created_at).toLocaleDateString()]})]})]})})},t.id))}),F.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No study materials available"})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Upload Study Material"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(L,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>g(n=>({...n,title:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>g(n=>({...n,description:t.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File *"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.txt",onChange:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},k?"file-input":"file-input-reset"),s.file&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Selected: ",s.file.name]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: PDF, Images (JPG, PNG), Documents (DOC, DOCX, TXT)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_public",checked:s.is_public,onChange:t=>g(n=>({...n,is_public:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_public",className:"ml-2 text-sm text-gray-700",children:"Make this material publicly accessible to students"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>o(!1),className:"flex-1",children:"Cancel"}),e.jsx(d,{type:"submit",disabled:D.isLoading,className:"flex-1",children:D.isLoading?"Uploading...":"Upload"})]})]})]})}),w&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Edit Study Material"}),e.jsx("button",{onClick:()=>{b(!1),y(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(L,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:r.title,onChange:t=>h(n=>({...n,title:t.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:t=>h(n=>({...n,description:t.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"edit_is_public",checked:r.is_public,onChange:t=>h(n=>({...n,is_public:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit_is_public",className:"ml-2 text-sm text-gray-700",children:"Make this material publicly accessible to students"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{b(!1),y(null)},className:"flex-1",children:"Cancel"}),e.jsx(d,{type:"submit",disabled:C.isLoading,className:"flex-1",children:C.isLoading?"Updating...":"Update"})]})]})]})}),E&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Delete Study Material"}),e.jsx("button",{onClick:()=>{i(!1),P(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(L,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to delete this study material?"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("p",{className:"font-medium text-gray-900",children:S.title}),S.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description})]}),e.jsx("p",{className:"text-sm text-red-600 mt-3",children:"This action cannot be undone. The file will be permanently deleted."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{i(!1),P(null)},className:"flex-1",children:"Cancel"}),e.jsx(d,{type:"button",onClick:ae,disabled:_.isLoading,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:_.isLoading?"Deleting...":"Delete"})]})]})})]})};function qe(){const[x,f]=p.useState(null),[N,l]=p.useState(null),c={user:{full_name:"John Smith",email:"john.smith@example.com",phone:"+1234567891",photo_path:null},employee_id:"TCH001",qualification:"M.Sc. Mathematics, B.Ed.",experience_years:8,salary:45e3,joining_date:"2017-08-15",subjects:["Mathematics","Statistics"],classes:["Class 10A","Class 11 Science","Class 12 Science"]},M=o=>{const m=o.target.files[0];if(m){if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(m.type)){R.error("Please select a valid image file (JPEG, PNG, or GIF)");return}if(m.size>5*1024*1024){R.error("File size must be less than 5MB");return}f(m);const w=new FileReader;w.onload=b=>l(b.target.result),w.readAsDataURL(m)}},k=async()=>{if(x)try{new FormData().append("file",x),R.success("Photo uploaded successfully!"),f(null),l(null)}catch{R.error("Failed to upload photo")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(a,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:e.jsx(a.Content,{className:"p-6 sm:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-white/20 backdrop-blur-sm border-4 border-white/30 flex items-center justify-center overflow-hidden shadow-lg",children:N?e.jsx("img",{src:N,alt:"Profile preview",className:"w-full h-full object-cover"}):e.jsx($,{className:"h-8 w-8 sm:h-12 sm:w-12 text-white/70"})}),e.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"hidden",id:"photo-upload"}),e.jsx("label",{htmlFor:"photo-upload",children:e.jsx(d,{size:"sm",className:"h-8 w-8 p-0 rounded-full bg-white text-purple-600 hover:bg-purple-50 shadow-md",asChild:!0,children:e.jsx("span",{className:"cursor-pointer",children:e.jsx($,{className:"h-4 w-4"})})})}),c.user.photo_path,x&&e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"sm",onClick:k,className:"h-8 w-8 p-0 rounded-full bg-green-500 text-white hover:bg-green-600 shadow-md",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>{f(null),l(null)},className:"h-8 w-8 p-0 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-md",children:e.jsx(L,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:c.user.full_name}),e.jsx("p",{className:"text-purple-100 mb-1",children:c.qualification}),e.jsxs("p",{className:"text-purple-100 text-sm",children:["Employee ID: ",c.employee_id," • ",c.experience_years," years experience"]}),e.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-start gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2",children:[e.jsx("div",{className:"text-xs text-purple-100",children:"Joining Date"}),e.jsx("div",{className:"text-sm font-semibold",children:new Date(c.joining_date).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2",children:[e.jsx("div",{className:"text-xs text-purple-100",children:"Classes"}),e.jsxs("div",{className:"text-sm font-semibold",children:[c.classes.length," assigned"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2",children:[e.jsx("div",{className:"text-xs text-purple-100",children:"Subjects"}),e.jsxs("div",{className:"text-sm font-semibold",children:[c.subjects.length," teaching"]})]})]})]})]})})}),e.jsx(a,{className:"border-dashed border-2 border-gray-300 bg-gray-50",children:e.jsxs(a.Content,{className:"p-4 text-center",children:[e.jsx($,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:x?"Click the checkmark to upload your photo":"Upload a professional profile photo to personalize your teacher account"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max size: 5MB • Supported formats: JPEG, PNG, GIF"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsx(a.Header,{className:"pb-3",children:e.jsxs(a.Title,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5 text-purple-600"}),"Personal Information"]})}),e.jsx(a.Content,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.user.full_name})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.user.email})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Phone"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.user.phone})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.employee_id})]})]})})]}),e.jsxs(a,{children:[e.jsx(a.Header,{className:"pb-3",children:e.jsxs(a.Title,{className:"text-lg flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-purple-600"}),"Professional Information"]})}),e.jsx(a.Content,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Qualification"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.qualification})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Experience"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:[c.experience_years," years"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Joining Date"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:new Date(c.joining_date).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Monthly Salary"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:["₹",c.salary.toLocaleString()]})]})]})})]}),e.jsxs(a,{children:[e.jsx(a.Header,{className:"pb-3",children:e.jsxs(a.Title,{className:"text-lg flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-purple-600"}),"Subjects Taught"]})}),e.jsx(a.Content,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:c.subjects.map((o,m)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:o},m))})})]}),e.jsxs(a,{children:[e.jsx(a.Header,{className:"pb-3",children:e.jsxs(a.Title,{className:"text-lg flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-purple-600"}),"Classes Assigned"]})}),e.jsx(a.Content,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:c.classes.map((o,m)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-pink-100 text-pink-800",children:o},m))})})]}),e.jsxs(a,{className:"lg:col-span-2",children:[e.jsx(a.Header,{className:"pb-3",children:e.jsx(a.Title,{className:"text-lg",children:"Quick Actions"})}),e.jsx(a.Content,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs(d,{variant:"outline",className:"justify-start",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"View Classes"]}),e.jsxs(d,{variant:"outline",className:"justify-start",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"View Students"]}),e.jsxs(d,{variant:"outline",className:"justify-start",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"View Schedule"]}),e.jsxs(d,{variant:"outline",className:"justify-start",children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Upload Materials"]})]})})]})]})]})}const Be=()=>{const{user:x}=J();return!x||x.role!=="teacher"&&!x.teacher_id&&!x.teacherId?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("div",{className:"text-yellow-600 mb-2",children:e.jsx("svg",{className:"h-8 w-8 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-yellow-900 mb-2",children:"Teacher Access Required"}),e.jsx("p",{className:"text-yellow-700",children:"You need teacher access to view this dashboard. Please contact the administrator."})]})}):e.jsxs(ne,{children:[e.jsx(j,{path:"/",element:e.jsx(ce,{})}),e.jsx(j,{path:"/classes",element:e.jsx(ie,{})}),e.jsx(j,{path:"/students",element:e.jsx(de,{})}),e.jsx(j,{path:"/attendance",element:e.jsx(oe,{})}),e.jsx(j,{path:"/exams",element:e.jsx(xe,{})}),e.jsx(j,{path:"/results",element:e.jsx(me,{})}),e.jsx(j,{path:"/schedule",element:e.jsx(he,{})}),e.jsx(j,{path:"/performance",element:e.jsx(Ge,{})}),e.jsx(j,{path:"/notices",element:e.jsx(ze,{})}),e.jsx(j,{path:"/materials",element:e.jsx(Re,{})}),e.jsx(j,{path:"/profile",element:e.jsx(qe,{})}),e.jsx(j,{path:"*",element:e.jsx(Ie,{})})]})},Ze=ue(Be,["teacher"]);export{Ze as default};
